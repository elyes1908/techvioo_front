{
    "className": "org.joget.apps.form.model.Form",
    "elements": [
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field23",
                            "label": "",
                            "value": "<div class=\"d-flex align-items-center justify-content-between w-100\">\n   <button type=\"button\" class=\"clear-btn mx-1 px-3 btn-red float-start rounded-2  fs-6  btn  clear-btn epilogue-semiBold\" onclick=\"window.location.replace('talents');\">Clear<\/button>\n<\/div>\n\n<script>\nfunction clear(){\n    window.location.replace('talents');\n}\nfunction clearFonction() {\n    \n    //keywords\n    document.getElementById('keywords').value='';\n\n    //reperters\n    var deleteRepeter= document.getElementsByClassName('repeater-action-delete')\n    console.log(\"deleteRepeter: \", deleteRepeter);\n    var deleteRepeterLength=deleteRepeter.length;\n    if(deleteRepeterLength>0) {\n        while( deleteRepeterLength != 0) {\n            deleteRepeter[deleteRepeterLength-1].click();\n            deleteRepeterLength--;\n        }\n    }\n    \n    var repetersAddBtn=document.querySelectorAll('.repeater-actions-add');\n    for (var repBtn of repetersAddBtn) {\n        repBtn.style.display='unset';\n    }\n\n    //Slider\n    $(\".ui-state-default:first\").text('0');\n    $(\".ui-state-default\").slice(1).text('35');\n    var v = [0, 35];\n        $(\"#slider_years_experience_years_experience\").slider({\n            range: true,\n            min: 0,\n            max: 35,\n            values: v,\n            slide: function(event, ui) {\n            //return false;\n              if ((ui.values[1] - ui.values[0]) < 2) {\n    \t          return false;\n              }\n              $(\".ui-state-default:first\").text(ui.values[0]);\n              $(\".ui-state-default\").slice(1).text(ui.values[1]);\n              document.getElementById('min_years_exp').value=ui.values[0];\n              document.getElementById('max_years_exp').value=ui.values[1];\n            },\n            create: function(event, ui) {\n                $(\".ui-state-default:first\").text(v[0]);\n                $(\".ui-state-default\").slice(1).text(v[1]);\n                \n            }\n        }).trigger('slide');\n\n    document.getElementById('min_years_exp').value=0;\n    document.getElementById('max_years_exp').value=35;\n\n    //Ajax single selection\n    document.getElementById('job').innerHTML=\"\";\n    document.getElementById('location').innerHTML=\"\";\n    document.getElementById('level_of_education').innerHTML=\"\";\n    document.getElementById('field_of_study').innerHTML=\"\";\n    var ajaxSingle=document.querySelectorAll('.chosen-single');\n    var placeholders=['Job title',\n    'Current location',\n    'Level of education',\n    'Field of study'];\n    var index=0;\n\n    for (var itemSingle of ajaxSingle) {\n        itemSingle.className=\"chosen-single chosen-default\";\n        itemSingle.innerHTML=`<span>${placeholders[index]}<\/span><div><b><\/b><\/div>`;\n        index++;\n    }\n    \n    //Ajax multi selection\n    var ajaxMulti=document.getElementsByClassName('search-choice-close');\n    console.log(ajaxMulti);\n    var ajaxMultiLength=ajaxMulti.length;\n    if(ajaxMultiLength>0) {\n        while( ajaxMultiLength != 0) {\n            ajaxMulti[ajaxMultiLength-1].click();\n            ajaxMultiLength--;\n        }\n    }\n\n}\n\n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "accor",
                            "label": "",
                            "value": "<style>\n    #save{\n        float:right;\n        display:none;\n    }\n    \n    /* The Modal (background) */\n    .modal {\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      z-index: 1; /* Sit on top */\n      left: 0;\n      top: 0;\n      width: 100%; /* Full width */\n      height: 100%; /* Full height */\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    }\n    \n    /* Modal Content/Box */\n    .modal-content {\n      background-color: #fefefe;\n      margin: 15% auto;/* 15% from the top and centered */\n      padding: 20px;\n      border: 1px solid #888;\n      width: 500px; /* Could be more or less, depending on screen size */\n    }\n    \n    /* The Close Button */\n    .close {\n      color: #aaa;\n      float: right;\n      font-size: 50px;\n      font-weight: bold;\n    }\n    \n    .close:hover,\n    .close:focus {\n      color: black;\n      text-decoration: none;\n      cursor: pointer;\n    }\n    \n    .hr{\n       height:1px;\n       border-width:0;\n       color:gray;\n       background-color:gray \n    }\n<\/style>\n\n      <div class=\"acc\">\n    <div class=\"acc__card\">\n      <div class=\"acc__title template-color epilogue-bold\">Filters<\/div>\n      <div class=\"acc__panel\">\n         <div class=\"oo\"><\/div>\n      <\/div>\n    <\/div>\n \n\n  <\/div>\n<input type=\"button\" value=\"Save\" id=\"save\" disabled/>\n\n<div id=\"myModal\" class=\"modal\">\n\n  <!-- Modal content -->\n  <div class=\"modal-content\">\n    <span class=\"close\">&times;<\/span>\n    <div id=\"modal-msg\">\n         <div>\n                <label>SAVE A SEARCH<\/label>\n                <input id=\"save_title\"  type=\"text\" value=\"\">\n          <\/div>\n    <\/div>\n    <input type=\"button\" value=\"Save\" id=\"confirmSave\"/>\n\n  <\/div>\n<\/div>\n\n\n\n\n\n<script>\nwindow.onload=function(){\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const id = urlParams.get('id')\n    if(id!=null){\n        document.getElementById('save').disabled=false;\n    }\n}\n\n$(document).ready(function(){\n// Get the modal\nvar modal = document.getElementById(\"myModal\");\n\n// Get the <span> element that closes the modal\nvar span = document.getElementsByClassName(\"close\")[0];\n\n// When the user clicks on <span> (x), close the modal\nspan.onclick = function() {\n  modal.style.display = \"none\";\n}\n\n// When the user clicks anywhere outside of the modal, close it\nwindow.onclick = function(event) {\n  if (event.target == modal) {\n    modal.style.display = \"none\";\n  }\n}\n\nvar save = document.getElementById(\"save\");\n\nsave.onclick = function() {\n  modal.style.display = \"block\";\n}\n\nvar confirmSave=document.getElementById(\"confirmSave\");\n\nconfirmSave.onclick = function() {\n    var title=document.getElementById(\"save_title\").value;\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const idsearch = urlParams.get('id')\n    var uri='E8C088A2B0B84F34AED8BDF7126FDC38?id='+idsearch+'&title='+title;\n           \n    window.location.replace(uri);\n}\n\n})\n\n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "id": "keywords",
                            "label": "Keyword",
                            "maxlength": "40",
                            "placeholder": "Keyword",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field20",
                            "label": "",
                            "value": "<label style=\"font-weight:bold\">Skills<\/label>"
                        }
                    },
                    {
                        "className": "org.joget.SubformRepeater",
                        "properties": {
                            "addMode": "enable",
                            "collapsedByDefault": "",
                            "collapsible": "true",
                            "deleteMode": "enable",
                            "editFormDefId": "",
                            "editMode": "enable",
                            "enableSorting": "",
                            "errorMessage": "You can select maximum 3 skills",
                            "formDefId": "select_skill",
                            "id": "mandatory_skills",
                            "label": "Mandatory",
                            "loadBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "storeBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "uniqueKey": "",
                            "validateMaxRow": "3",
                            "validateMinRow": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            }
                        }
                    },
                    {
                        "className": "org.joget.SubformRepeater",
                        "properties": {
                            "addMode": "enable",
                            "collapsedByDefault": "",
                            "collapsible": "true",
                            "deleteMode": "enable",
                            "editFormDefId": "",
                            "editMode": "enable",
                            "enableSorting": "",
                            "errorMessage": "You can select maximum 3 skills",
                            "formDefId": "select_skill_nice_to_have",
                            "id": "nth_skills",
                            "label": "Nice to have",
                            "loadBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "storeBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "uniqueKey": "",
                            "validateMaxRow": "3",
                            "validateMinRow": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            }
                        }
                    },
                    {
                        "className": "org.joget.SubformRepeater",
                        "properties": {
                            "addMode": "enable",
                            "collapsedByDefault": "",
                            "collapsible": "true",
                            "deleteMode": "enable",
                            "editFormDefId": "",
                            "editMode": "enable",
                            "enableSorting": "",
                            "errorMessage": "You can select maximum 3 skills",
                            "formDefId": "select_skill_optional",
                            "id": "opt_skills",
                            "label": "Optional",
                            "loadBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "storeBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "uniqueKey": "",
                            "validateMaxRow": "3",
                            "validateMinRow": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            }
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "certification",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Certifications",
                            "listId": "listcertificationsdata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "true",
                            "placeholder": "certifications",
                            "readonly": "",
                            "readonlyLabel": "true",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "job",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Job title",
                            "listId": "listjobtitles",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "",
                            "placeholder": "Job title",
                            "readonly": "",
                            "readonlyLabel": "true",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field18",
                            "label": "",
                            "value": "\r\n\t<style>\r\n\t\r\n.ui-slider { position: relative; text-align: left; }\r\n.ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 1.2em; height: 1.2em; cursor: default; }\r\n.ui-slider .ui-slider-range { position: absolute; z-index: 1; font-size: .7em; display: block; border: 0; background-position: 0 0; }\r\n\r\n.ui-slider-horizontal { height: .8em; }\r\n.ui-slider-horizontal .ui-slider-handle { top: -.3em; margin-left: -.6em; }\r\n.ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; }\r\n.ui-slider-horizontal .ui-slider-range-min { left: 0; }\r\n.ui-slider-horizontal .ui-slider-range-max { right: 0; }\r\n\r\n.ui-slider-vertical { width: .8em; height: 100px; }\r\n.ui-slider-vertical .ui-slider-handle { left: -.3em; margin-left: 0; margin-bottom: -.6em; }\r\n.ui-slider-vertical .ui-slider-range { left: 0; width: 100%; }\r\n.ui-slider-vertical .ui-slider-range-min { bottom: 0; }\r\n.ui-slider-vertical .ui-slider-range-max { top: 0; }\r\n.ui-spinner { position:relative; display: inline-block; overflow: hidden; padding: 0; vertical-align: middle; }\r\n.ui-spinner-input { border: none; background: none; padding: 0; margin: .2em 0; vertical-align: middle; margin-left: .4em; margin-right: 22px; }\r\n.ui-spinner-button { width: 16px; height: 50%; font-size: .5em; padding: 0; margin: 0; text-align: center; position: absolute; cursor: default; display: block; overflow: hidden; right: 0; }\r\n.ui-spinner a.ui-spinner-button { border-top: none; border-bottom: none; border-right: none; } /* more specificity required here to overide default borders */\r\n.ui-spinner .ui-icon { position: absolute; margin-top: -8px; top: 50%; left: 0; } /* vertical centre icon */\r\n.ui-spinner-up { top: 0; }\r\n.ui-spinner-down { bottom: 0; }\r\n\t\t/*.years_experience .ui-slider {*/\r\n\t\t/*\tmargin-top: 20px;*/\r\n\t\t/*\theight: 7px;*/\r\n\t\t/*\tposition: relative;*/\r\n\t\t/*\tborder: none;*/\r\n\t\t/*\tbackground: rgba(116, 183, 207, 0.6);*/\r\n\t\t/*}*/\r\n\t\t\t\t.years_experience .ui-slider {\r\n\t\t\tmargin-top: 20px;\r\n\t\t\theight: 3px;\r\n\t\t\tposition: relative;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: #614ac133;\r\n\t\t}\r\n\t\t\r\n\t\ta.ui-slider-handle:hover{\r\n\t\t    cursor:pointer;\r\n\t\t    \tbackground: #ffffff !important;\r\n           border: 2px solid #0E6BB2 !important;\r\n\t\t}\r\n\t\t\ta.ui-slider-handle{\r\n\t\t    text-decoration:none;\r\n\t\t}\r\n\t\t.ui-state-hover,.ui-state-focus,.ui-slider-handle.ui-state-default.ui-corner-all:hover{\r\n\t\t  \tbackground: #614ac1 !important;\r\n            border: 2px solid #614ac1 !important;\r\n            top: -10px;\r\n            border-radius: 25px !important;\r\n            outline: none;\r\n            position: absolute;\r\n            font-family: \"Epilogue-Medium\" !important;  \r\n\t\t}\r\n\t\t.years_experience .ui-state-default, .years_experience .ui-widget-content .ui-state-default, .years_experience .ui-widget-header .ui-state-default {\r\n\t\t\tbackground: #ffffff;\r\n            border: 2px solid #614ac1;\r\n            top: -10px;\r\n            border-radius: 25px;\r\n            outline: none;\r\n            position: absolute;\r\n            font-family: \"Epilogue-Medium\" !important;\r\n    \t}\r\n\t\t.years_experience .ui-slider-horizontal .ui-slider-range {\r\n\t\t\tbackground: #614ac1 !important;\r\n\t\t}\r\n\t\t.years_experience #labelHolder {\r\n\t\t\theight: 7px;\r\n\t\t\tposition: relative;\r\n\t\t\tborder: none;\r\n\t\t}\r\n\t\t.years_experience span {\r\n\t\t  position: absolute;\r\n\t\t  width: 1.2em;\r\n\t\t  height: 1.2em;\r\n\t\t  margin-left: -.6em;\r\n\t\t  text-align: center;\r\n\t\t}\r\n\t\t.ui-slider .ui-slider-handle {\r\n    position: absolute;\r\n    z-index: 2;\r\n    width: 23px;\r\n    height: 23px;\r\n    cursor: default;\r\n    line-height: 23px;\r\n    text-align: center;\r\n}\r\n\t.years_experience .ui-widget-content {\r\n\r\n    border-radius: 1.2rem !important;\r\n}\r\n/******************************/\r\n.ui-widget-content {\r\n    padding: 1px;\r\n}\r\n.years_experience .ui-state-hover, .years_experience .ui-widget-content .ui-state-hover,\r\n.years_experience .ui-widget-header .ui-state-hover, .years_experience .ui-state-focus,\r\n.years_experience .ui-widget-content .ui-state-focus, .years_experience .ui-widget-header .ui-state-focus {\r\n\tbackground: #ffffff !important;\r\n    border: 2px solid #614ac1 !important;\r\n     border-radius: 25px !important;\r\n    \r\n}\r\n\t<\/style>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.js\"><\/script>\r\n\r\n<label style=\"font-weight:bold\" class=\"w-100\">Years of experience<\/label><br />\r\n<div class=\"template-color epilogue-semiBold mt-4\">\r\n<span id=\"id-min-years\"><\/span> - \r\n<span id=\"id-max-years\"><\/span>\r\n<\/div>\r\n<div class=\"years_experience\">\r\n\r\n<div id=\"slider_years_experience_years_experience\"><\/div>\r\n<\/div>\r\n<br />\r\n        <script>\r\n        \r\n        $(function () {\r\n             var v = [ 0,35];\r\n            $(\"#slider_years_experience_years_experience\").slider({\r\n                range: true,\r\n                min: 0,\r\n                max: 35,\r\n                values: v,\r\n                slide: function(event, ui) {\r\n                //return false;\r\n                  if ((ui.values[1] - ui.values[0]) < 2) {\r\n                      return false;\r\n                  }\r\n              \r\n                       \r\n                 document.getElementById('min_years_exp').value=ui.values[0];\r\n                 document.getElementById('max_years_exp').value=ui.values[1];\r\n                 document.getElementById('id-min-years').innerHTML=ui.values[0];\r\n                 document.getElementById('id-max-years').innerHTML=ui.values[1];\r\n            \r\n                },\r\n                create: function(event, ui) {\r\n                    $(\"#id-min-years\").html(v[0]);\r\n                    $(\"#id-max-years\").html(v[1]);     \r\n                }\r\n            }).trigger('slide');\r\n        });\r\n        $( document ).ready(function() {\r\n            min=document.getElementById('min_years_exp').value;\r\n            max=document.getElementById('max_years_exp').value;\r\n            mins=100/35*min;\r\n            maxs=100/35*max;\r\n            console.log(\"mins\",mins);\r\n            console.log(\"maxs\",maxs);\r\n                 \r\n                 document.getElementById('id-min-years').innerHTML=min;\r\n                 document.getElementById('id-max-years').innerHTML=max;\r\n                 \r\n                \r\n            document.getElementsByClassName('ui-slider-range ui-widget-header')[0].setAttribute(\"style\",`left: ${mins}%; width: ${maxs-mins}%;`);\r\n            document.getElementsByClassName('ui-slider-handle ui-state-default ui-corner-all')[0].setAttribute(\"style\",`left: ${mins}%;`);\r\n            document.getElementsByClassName('ui-slider-handle ui-state-default ui-corner-all')[1].setAttribute(\"style\",`left: ${maxs}%;`);\r\n          //  $(\"#slider_years_experience_years_experience *\").parent.parent.parent.attr(\"disabled\", \"disabled\").off('click');\r\n        \r\n        });\r\n        \r\n        \r\n        <\/script>\r\n        \r\n"
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "location",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Current location",
                            "listId": "listlocationdata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "",
                            "placeholder": "Current location",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "25%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "level_of_education",
                            "label": "Level of education",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.tutorial.JdbcOptionsBinder",
                                "properties": {
                                    "addEmpty": "true",
                                    "emptyLabel": "Level of education",
                                    "jdbcDatasource": "default",
                                    "sql": "select id,c_label from app_fd_level_education;",
                                    "useAjax": ""
                                }
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "school",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "School",
                            "listId": "listschoolsdata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "",
                            "placeholder": "School",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "field_of_study",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Field of study",
                            "listId": "listfieldofstudydata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "2",
                            "multiple": "",
                            "permissionHidden": "",
                            "placeholder": "Field of study",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "spoken_languages",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Spoken languages",
                            "listId": "listlanguagesdata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "true",
                            "placeholder": "Spoken languages",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "result",
                            "useDefaultWhenEmpty": "",
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "saved",
                            "useDefaultWhenEmpty": "",
                            "value": "false",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "saved_talents",
                            "useDefaultWhenEmpty": "",
                            "value": "0",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "min_years_exp",
                            "useDefaultWhenEmpty": "true",
                            "value": "0",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "max_years_exp",
                            "useDefaultWhenEmpty": "true",
                            "value": "35",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "tags",
                            "useDefaultWhenEmpty": "",
                            "value": "",
                            "workflowVariable": ""
                        }
                    }
                ],
                "properties": {
                    "customWidth": "",
                    "horizontal": "",
                    "label": "",
                    "width": "100%"
                }
            }],
            "properties": {
                "comment": "",
                "id": "section_filter",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "",
                "permissionReadonly": "",
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field22",
                            "label": "",
                            "value": "<style>\r\n/* The Modal (background) */\r\n#titleSearchError{\r\n    margin-bottom:5px;\r\n}\r\n    .modal {\r\n      display: none; /* Hidden by default */\r\n      position: fixed; /* Stay in place */\r\n      z-index: 999; /* Sit on top */\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%; /* Full width */\r\n      height: 100%; /* Full height */\r\n      overflow: auto; /* Enable scroll if needed */\r\n      background-color: rgb(0,0,0); /* Fallback color */\r\n      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\r\n    }\r\n    \r\n  .modal-content {\r\n    background-color: #ffffff;\r\n    margin: 15% auto;\r\n    padding: 0;\r\n    border: 1px solid #888;\r\n    width: 500px;\r\n    display: block;\r\n}\r\n    \r\n #myModal-advancedSearch .close,\r\n  #myModal-Error .close{\r\n\r\n    color: #ffffff !important;\r\n    float: right;\r\n    font-weight: 500;\r\n    opacity: 1;\r\n    position: absolute;\r\n    right: -11px;\r\n    top: -10px;\r\n    width: 25px !important;\r\n    height: 25px !important;\r\n    line-height: 24px !important;\r\n    text-align: center;\r\n    font-size: 19px;\r\n    border-radius: 50%;\r\n    border: 0 !important;\r\n    box-shadow: rgb(100 100 111 / 20%) 0px 7px 29px 0px;\r\n    background: #614ac1 !important;\r\n    text-shadow: none;\r\n}\r\n    .close:hover,\r\n    .close:focus {\r\n      color: #0E6BB2;\r\n      text-decoration: none;\r\n      cursor: pointer;\r\n    }\r\n    .modal-save .btn.waves-input-wrapper {\r\n    color: #ffffff !important;\r\n    background-color: #614ac1 !important;\r\n}\r\n<\/style>\r\n\r\n<div class=\"col bg-white border  p-3 mb-4 d-sm-flex d-md-flex justify-content-between align-items-center rounded-4\">\r\n  <h3 class=\"epilogue-bold template-color  \"  style=\"margin: 0;\">About : <span id=\"total_result\" style=\"size:18px\">0<\/span> results<\/h3>\r\n  <div class=\"d-flex justify-content-end align-items-center\">\r\n    <span class=\"epilogue-regular\">Sort By : <\/span>\r\n    <select class=\"border-none epilogue-medium pe-5\" style=\"width: auto;\" id='sortOption'>\r\n      <option value=\"mostRelevant\">Most relevant<\/option>\r\n      <option value=\"locationAZ\">Location A-Z<\/option>\r\n    <\/select>\r\n    <button class=\" mx-1 px-3 btn-blue float-start rounded-2  fs-6 epilogue-bold btn_export\" disabled>Export<\/button>\r\n    <button type=\"button\" id=\"SaveAdvs\" class=\" mx-1 px-3 btn-blue float-start rounded-2  fs-6 epilogue-bold\" onclick=\"saveSearch()\" disabled>Save<\/button>\r\n  <\/div>\r\n<\/div>\r\n\r\n<div id=\"myModal-advancedSearch\" class=\"modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"modal-content modal-save\">\r\n    <span class=\"close close-modal\">&times;<\/span>\r\n      <h4 class=\"template-color text-center p-3 \" style=\"background-color:#F7F8FA;\">Save a search<\/h4>\r\n    <div id=\"modal-msg text-center  p-3\">\r\n         <div class=\"mx-4\">\r\n            \r\n            <label class=\"color-blue-1 p-2 text-center w-100 epilogue-semiBold\">Enter search title<\/label>\r\n             <span class=\"form-error-message\" id=\"titleSearchError\">Field mandatory<\/span>\r\n            <input id=\"save_title_advancedSearch\" class=\"template-color \" placeholder=\"Keyword\" type=\"text\" value=\"\" maxlength=\"40\">\r\n        <\/div>\r\n    <\/div>\r\n    <div class=\" m-3 text-center \">\r\n        <button type=\"button\" class=\"template-color close-modal close-modal-btn text-center ml-2 rounded-8 btn-border   epilogue-semibold\" >Cancel<\/button>\r\n        <input type=\"button\" class=\"bg-template-color rounded-8    epilogue-semiBold\" value=\"Save\" id=\"confirmSaveSearch\"/>\r\n    <\/div>\r\n\r\n  <\/div>\r\n<\/div>\r\n\r\n<script>\r\n     // Get the modal\r\n        var modal2 = document.getElementById(\"myModal-advancedSearch\");\r\n        \r\n       \r\n         // Get the <span> element that closes the modal\r\n        var span = document.getElementsByClassName(\"close-modal\")[0];\r\n        \r\n      \r\n        // When the user clicks on <span> (x), close the modal\r\n        span.onclick = function() {\r\n            document.getElementById(\"titleSearchError\").style.display=\"none\";\r\n          modal2.style.display = \"none\";\r\n        }\r\n           // Get the <span> element that closes the modal\r\n        var span1 = document.getElementsByClassName(\"close-modal\")[1];\r\n        \r\n      \r\n        // When the user clicks on <span> (x), close the modal\r\n        span1.onclick = function() {\r\n          modal2.style.display = \"none\";\r\n              document.getElementById(\"titleSearchError\").style.display=\"none\";\r\n        }\r\n        function saveSearch(){\r\n        modal2.style.display = \"block\";\r\n        window.addEventListener(\"click\", function(e){ \r\n                if (e.target == modal2) {\r\n                        modal2.style.display = \"none\";\r\n                        document.getElementById(\"titleSearchError\").style.display=\"none\";\r\n                  }\r\n            });\r\n        }\r\n        \r\n \r\n        \r\n        var confirmSave=document.getElementById(\"confirmSaveSearch\");\r\n        \r\n        confirmSave.onclick = function() {\r\n            var title=document.getElementById(\"save_title_advancedSearch\").value;\r\n            var total_result=document.getElementById(\"saved_talents\").value;\r\n            const queryString = window.location.search;\r\n            const urlParams = new URLSearchParams(queryString);\r\n            const search = urlParams.get('id');\r\n            console.log(\"Title: \",title,\" total: \",total_result);\r\n            \r\n            if(title!==''){\r\n                    parent.window.location.replace('savedTalentsSearch?id='+search+'&title='+title+\"&total_result=\"+total_result);\r\n            }else{\r\n         \r\n                document.getElementById(\"titleSearchError\").style.display=\"block\";\r\n                \r\n                   \r\n               \r\n            }\r\n            \r\n        }\r\n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field21",
                            "label": "",
                            "value": "<style>\n    /* Style the tab */\n    .tab {\n      overflow: hidden;\n    }\n    \n    /* Style the buttons inside the tab */\n    \n    /* Change background color of buttons on hover */\n    .tab button:hover {\n    color: black;\n    border: none;\n    border-bottom: 3px solid #0E6BB2;\n    background-color: transparent;\n    }\n    \n    /* Create an active/current tablink class */\n    .tab button.active {\n      color:black;\n      border-bottom:2px solid #0E6BB2;\n    }\n<\/style>\n\n<div class=\"tab  border-radius-4 border bg-white mb-4 d-sm-flex d-md-flex justify-content-between align-items-center rounded-4\">\n    <div>\n    <button type=\"button\" class=\"tablinks epilogue-semiBold\" id=\"btnAll\" onclick=\"filter('All')\">All (0)<\/button>\n    <button type=\"button\" class=\"tablinks epilogue-semiBold\" id=\"btnYes\" onclick=\"filter('Yes')\">Yes (0)<\/button>\n    <button type=\"button\" class=\"tablinks epilogue-semiBold\" id=\"btnMaybe\" onclick=\"filter('Maybe')\">Maybe (0)<\/button>\n    <button type=\"button\" class=\"tablinks epilogue-semiBold\" id=\"btnActive\" onclick=\"filter('Active')\">Active (0)<\/button>\n    <button type=\"button\" class=\"tablinks epilogue-semiBold\" id=\"btnHired\" onclick=\"filter('Hired')\">Hired (0)<\/button>\n    <\/div>\n\n     <div class=\"right-inner-addon input-container me-2\">\n            <i class=\"fa fa-search\"><\/i>\n            <input type=\"text\" class=\"border-input epilogue-semiBold\" id=\"filterbar\" placeholder=\"Search\" />\n        <\/div>\n    <!--<div class=\"me-2\">-->\n    <!--  <input type=\"text\" class=\"border-input\" id=\"filterbar\" placeholder=\"Search\" />-->\n    <!--  <\/div>-->\n<\/div>\n<script>\n  function startPage(){\n        \tvar page = new List('result-div', {\n                page: 6,\n                pagination: true\n            });\n    }\n      filterbar.addEventListener('input', (e) => {\n\t\t\tfilterData(e.target.value);\n\t\t});\n\t\t\n\t\tfunction filterData(searchTerm) {\n\t\t      ArrItems=[];\n\t\t\tlistItems.forEach(item => {\n\t\t\t    var divUserInfo= $(item).children('div');\n\t\t\t    var selectValue= $(divUserInfo).children('select').val();\n\t\t\t    if(tabFilter==\"All\"){\n\t\t\t        if(item.innerText.toLowerCase().includes(searchTerm.toLowerCase())) {\n    \t\t\t\t//\titem.classList.remove('hide');\n    \t\t\t\t\tArrItems.push(item);\n    \t\t\t\t} else {\n    \t\t\t\t//\titem.classList.add('hide');\n    \t\t\t\t}\n\t\t\t    }else{\n\t\t\t        if(selectValue==tabFilter){\n        \t\t\t\tif(item.innerText.toLowerCase().includes(searchTerm.toLowerCase())) {\n        \t\t\t//\t\titem.classList.remove('hide');\n        \t\t\t\tArrItems.push(item);\n        \t\t\t\t} else {\n        \t\t\t\t//\titem.classList.add('hide');\n        \t\t\t\t}\n\t\t\t        }\n\t\t\t    }\n\t\t\t\n\t\t\t})\n\t\t\tif(ArrItems==[]){\n\t\t        document.getElementById('list-result').innerHTML=listItems;\n\t\t    }else{\n\t\t        document.getElementById('list-result').innerHTML='';\n\t\t        for(const li in ArrItems){\n\t\t            document.getElementById('list-result').appendChild(ArrItems[li]);\n\t\t        }\n\t\t         var paginationList = new List('result-div', {\n                                page: 6,\n                                pagination: true\n                            });\n\t\t       console.log(ArrItems);\n\t\t       //   document.getElementById('list-result').innerHTML=ArrItems;\n\t\t         // startPage();\n\t\t    }\n\t\t\n\t\t}\n\t\t\n\t\n\n   let tabFilter=\"All\";\n   function filter(value){\n                localStorage.setItem(\"advanced_search_tab\",value);\n                tabFilter=value;\n                var filterValue = value;\n                    listItems.forEach(item => {\n                    var userInfo = $(item).children('.user-info');\n                    var review= $(userInfo).children('.review-box');\n                    var reviewValue = $(review).find(\":selected\").text();\n    \t\t\t\tif(filterValue==\"All\"){\n    \t\t\t\t    item.classList.remove('hide');\n    \t\t\t\t    $('.nav-pagination').css(\"visibility\", \"visible\");\n    \t\t\t\t}\n    \t\t\t\telse{\n        \t\t\t    if(reviewValue==filterValue) {\n        \t\t\t\t\titem.classList.remove('hide');\n        \t\t\t\t} else {\n        \t\t\t\t\titem.classList.add('hide');\n        \t\t\t\t}\n                        $('.nav-pagination').css(\"visibility\", \"hidden\");\n    \t\t\t\t}\n    \t\t\t});\n                \n    }\n    \n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "show_results",
                            "label": "",
                            "value": "\r\n\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js\"><\/script>\r\n\r\n    <script type=\"text/javascript\" src=\"/jw/js/chosen/chosen.jquery.js\"><\/script>\r\n    <script type=\"text/javascript\"\r\n        src=\"/jw/plugin/org.joget.marketplace.AjaxSelectbox/js/jquery.ajaxselect.js\"><\/script>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/jw/js/chosen/chosen.css\">\r\n    <style>\r\n    .blockUI,.blockOverlay{\r\n        display:none !important;\r\n    }\r\n        * {\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        #bookmark-toggle {\r\n            font-size: 25px;\r\n            user-select: none;\r\n        }\r\n\r\n        .repeater-actions-add {\r\n            float: left;\r\n            z-index: 0;\r\n        }\r\n\r\n        .container {\r\n            border-radius: 5px;\r\n            overflow: hidden;\r\n            /*width: 1100px;*/\r\n        }\r\n\r\n        .header {\r\n            color: black;\r\n            padding: 5px 20px;\r\n            width: 1100px;\r\n        }\r\n\r\n        .title {\r\n            margin: 0;\r\n        }\r\n\r\n        .subtitle {\r\n            display: inline-block;\r\n            margin: 5px 0 20px;\r\n            /*opacity: 0.8;*/\r\n        }\r\n\r\n        .users-list {\r\n\r\n            list-style-type: none;\r\n            margin: 0;\r\n            width: 100%;\r\n            padding: 0px;\r\n            box-sizing: content-box;\r\n        }\r\n\r\n        .users-list li {\r\n            margin-bottom: 10px;\r\n        }\r\n\r\n        /*.users-list li:not(:last-of-type) {*/\r\n        /*\tborder-bottom: 1px solid #eee;*/\r\n        /*}*/\r\n\r\n        .users-list li.hide {\r\n            display: none;\r\n        }\r\n\r\n        .users-list li img {\r\n            border-radius: 50%;\r\n            object-fit: cover;\r\n            height: 100px;\r\n            width: 100px;\r\n            margin-bottom:35px;\r\n        }\r\n\r\n        .user-info {\r\n            margin-left: 10px;\r\n            width: 100%;\r\n            position: relative;\r\n        }\r\n\r\n        .user-info h4 {\r\n            margin: 0 0 10px;\r\n        }\r\n\r\n        .user-info p {\r\n            font-size: 12px;\r\n        }\r\n\r\n        .tags {\r\n            list-style: none;\r\n            margin: 0;\r\n            overflow: hidden;\r\n            padding: 0;\r\n        }\r\n\r\n        .tags li {\r\n            float: left;\r\n        }\r\n\r\n        .tag {\r\n            background: #ff98c4;\r\n            border-radius: 15px !important;\r\n            color:  #393939;\r\n            display: inline-block;\r\n            height: 26px;\r\n            line-height: 26px;\r\n            padding: 0 20px 0 23px;\r\n            position: relative;\r\n            margin: 0 10px 10px 0;\r\n            text-decoration: none;\r\n        }\r\n\r\n        .switch {\r\n            position: relative;\r\n            display: inline-block;\r\n            width: 60px;\r\n            height: 34px;\r\n        }\r\n\r\n        .switch input {\r\n            display: none;\r\n        }\r\n\r\n        .slider {\r\n            position: absolute;\r\n            cursor: pointer;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            background-color: #ccc;\r\n            -webkit-transition: .4s;\r\n            transition: .4s;\r\n        }\r\n\r\n        .slider:before {\r\n            position: absolute;\r\n            content: \"\";\r\n            height: 26px;\r\n            width: 26px;\r\n            left: 4px;\r\n            bottom: 4px;\r\n            background-color: white;\r\n            -webkit-transition: .4s;\r\n            transition: .4s;\r\n        }\r\n\r\n        input:checked+.slider {\r\n            background-color: #2196F3;\r\n        }\r\n\r\n        input:focus+.slider {\r\n            box-shadow: 0 0 1px #2196F3;\r\n        }\r\n\r\n        input:checked+.slider:before {\r\n            -webkit-transform: translateX(26px);\r\n            -ms-transform: translateX(26px);\r\n            transform: translateX(26px);\r\n        }\r\n\r\n        /* Rounded sliders */\r\n        .slider.round {\r\n            border-radius: 34px;\r\n        }\r\n\r\n        .slider.round:before {\r\n            border-radius: 50%;\r\n        }\r\n\r\n      .pagination li {\r\n            display: inline-block;\r\n            padding: 5px;\r\n        }\r\n        .pagination li a{\r\n            font-weight: 400;\r\n            padding: 0;\r\n            width: 35px;\r\n            height: 35px;\r\n            line-height: 33px !important;\r\n            text-align: center;\r\n            position: relative;\r\n            cursor: pointer;\r\n            display: inline-block;\r\n            z-index: 3;\r\n            border-radius: 3px !important;\r\n            margin-left: 5px;\r\n        }\r\n        .nav-pagination {\r\n          display:flex;\r\n          align-items:center;\r\n          justify-content: center;\r\n        }\r\n        .nav-pagination [class^=\"btn\"] {\r\n          padding:8px;\r\n          color:#515b6f;\r\n          margin:0 3px;\r\n        }\r\n    <\/style>\r\n\r\n    <div id=\"myModal-Error\" class=\"modal\">\r\n        <!-- Modal content -->\r\n        <div class=\"modal-content modal-save\">\r\n            <span class=\"close close-modal\">&times;<\/span>\r\n            <h4 class=\"template-color text-center p-3 \" style=\"background-color:#F7F8FA;\"><\/h4>\r\n            <div id=\"modal-msg text-center  p-3\">\r\n                <div class=\"mx-4\">\r\n                    <label class=\"color-blue-1 p-2 text-center w-100 epilogue-semiBold\"><\/label>\r\n                    <!--<input id=\"filter-error-msg\" class=\"template-color \" placeholder=\"\" type=\"text\" value=\"You must at least fill one filter !\" disabled>-->\r\n                <\/div>\r\n            <\/div>\r\n            <div class=\" m-3 text-center \">\r\n                <button type=\"button\"\r\n                    class=\"template-color close-modal close-modal-btn text-center ml-2 rounded-8 btn-border   epilogue-semibold\"\r\n                    onclick=\"closeZeroFilterModal();\">Close<\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!-- second modal -->\r\n  \r\n<!--  -->\r\n<div id=\"result-div\">\r\n        <ul id=\"list-result\" class=\"users-list list\">\r\n\r\n        <\/ul>\r\n         <div class=\"nav-pagination\">\r\n            <ul class=\"pagination\"><\/ul>\r\n        <\/div>\r\n    <\/div>\r\n    <!--<div id=\"empty-block\" class=\"bg-white border rounded-4\">-->\r\n    <!--    <img src=\"#appResource.hiring.png#\" alt=\"hirevioo search\" />-->\r\n    <!--<\/div>-->\r\n\r\n    <div id=\"empty-block\" class=\"bg-white border rounded-4\" style=\"padding-top:120px\">\r\n        <img src=\"#appResource.hiring.png#\" alt=\"hirevioo search\" style=\"width: 300px; height: 300px;\">\r\n        <h4 class=\"epilogue-medium\" style=\"margin-top: 25px;color: #614ac1;\">Please enter a search keyword<\/h4>\r\n    <\/div>\r\n\r\n    <script>\r\n\r\n        function popup_show(oid, id_search) {\r\n            var title = \"New search\"\r\n            var total_result = document.getElementById(\"saved_talents\").value;\r\n            var popup = new PopupDialog(\"DB23D7170BC5495DA07316B046A3D01D?id=\" + oid + \"&title=\" + title + \"&search=\" + id_search + \"&saved=false\" + \"&total_result=\" + total_result + \"&embed=true\", \"\");\r\n            popup.parentWindow = window;\r\n            popup.init();\r\n        }\r\n\r\n        function insertSearchResult(id_search, id_profile, score) {\r\n            fetch('#envVariable.backend_hirevioo_url_api#/insertSearchResult?id_search=' + id_search + '&id_profile=' + id_profile + '&score=' + score, { mode: 'no-cors' })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    //console.log(\"data inserted\");\r\n                })\r\n                .catch(error => {\r\n                    //console.log(error)\r\n                });\r\n\r\n        }\r\n\r\n\r\n        function getProfile(search_result, id_search) {\r\n\r\n            getData(search_result, id_search);\r\n            if (localStorage.getItem(\"advanced_search_tab\") == null && localStorage.getItem(\"saved_search_id\") == null) {\r\n                localStorage.setItem(\"advanced_search_id\", id_search);\r\n                localStorage.setItem(\"advanced_search_tab\", \"All\");\r\n            } else {\r\n                if (localStorage.getItem(\"advanced_search_id\") == id_search)\r\n                    tabFilterReload(localStorage.getItem(\"advanced_search_tab\"));\r\n                else {\r\n                    localStorage.setItem(\"advanced_search_id\", id_search);\r\n                    localStorage.setItem(\"advanced_search_tab\", \"All\");\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        const result = document.getElementById('list-result');\r\n        const filterbar = document.getElementById('filterbar');\r\n        const total = document.getElementById('total');\r\n        const listItems = [];\r\n\r\n\r\n\r\n        function getData(search_result, id_search,) {\r\n            const data = search_result;\r\n            const jsonData = JSON.parse(data);\r\n            var totalResult = jsonData.nb_results;\r\n            if (totalResult > 0) {\r\n                document.getElementById('SaveAdvs').disabled = false;\r\n            }\r\n            document.getElementById(\"total_result\").innerHTML = totalResult;\r\n            document.getElementById(\"btnAll\").innerHTML = \"All (\" + totalResult + \")\";\r\n\r\n            document.getElementById(\"saved_talents\").value = totalResult;\r\n            // clear\r\n            result.innerHTML = '';\r\n\r\n            jsonData.results.forEach(user => {\r\n                const li = document.createElement('li');\r\n                // store for filter\r\n                listItems.push(li);\r\n\r\n                var tags = \"\";\r\n                user.highlight.forEach(value => {\r\n                    if (value.length > 75) {\r\n                        value = value.slice(0, 65).concat('...');\r\n                    }\r\n\r\n                    tags += `<p class=\"tag\">${value}<\/p>`\r\n                });\r\n\r\n\r\n\r\n               // var oid = user._source.doc_id.$oid;\r\n                var oid = user._source.doc_id;\r\n                \r\n                var score = user._score;\r\n                var star = \"\";\r\n                //API insert search result\r\n                insertSearchResult(id_search, oid, score);\r\n                var score = Math.trunc(score);\r\n                if (score >= 5) {\r\n                    var score = 5;\r\n                }\r\n                for (i = 0; i < 5; i++) {\r\n                    if (i < score) {\r\n                        var star = star.concat('<i class=\"template-color fa fa-star\" aria-hidden=\"true\"><\/i>');\r\n                    } else {\r\n                        var star = star.concat('<i class=\"template-color fa fa-star-o\" aria-hidden=\"true\"><\/i>');\r\n                    }\r\n                }\r\n                var image=user._source.image!=\"\" ? `data:image/png;base64, ${user._source.image}`: \"#appResource.defaultProfilePicture.png#\";\r\n\r\n                // var parInt = parseInt(score);\r\n                // var parFloat = score - parInt;\r\n\r\n                // if (parFloat > 0.5) {\r\n                //     parInt = parInt + 1\r\n                // }\r\n                // \r\n\r\n                // const star = '<i class=\"template-color fa fa-star\" aria-hidden=\"true\"><\/i>';\r\n                // const starOutline = '<i class=\"template-color fa fa-star-o\" aria-hidden=\"true\"><\/i>';\r\n                li.innerHTML = `\r\n                <a onclick=\"popup_show('`+ oid + `','` + id_search + `');return false;\" >\r\n                     <div class=\"d-md-flex  flex-grow-1 align-items-center justify-content-between p-3 mb-2 bg-white border  position-relative talent-advenced-search rounded-8\">\r\n                      <div class=\"d-sm-flex align-items-center w-100\">\r\n                       <img class=\"me-3\" src=\"${image}\" alt=\"${user._source.name}\">\r\n                        <div class=\"talent-body d-flex flex-column justify-content-between align-items-center align-items-sm-start\">\r\n                          <div class=\"talent-name epilogue-semiBold\">\r\n                          \r\n                            <h4 class=\"color-black my-3 epilogue-semiBold\" id=\"username_result\">${user._source.name}<\/h4>\r\n                           \r\n                          <\/div>\r\n                          <div class=\"talent-job \">\r\n                            <h5>\r\n                              <span class=\"epilogue-semiBold\">${user._source.job_1}<\/span> at <span class=\"epilogue-extraBold\">${user._source.company_1}<\/span>\r\n                            <\/h5>\r\n                          <\/div>\r\n                          <div class=\"talent-city\">\r\n                            <i class='template-color fs-2 fa fa-map-marker '><\/i> <span class=\"epilogue-regular\">${user._source.location}<\/span>\r\n                          <\/div>\r\n                          <div class=\"skills mt-2\" style=\" min-height: 34px;\">\r\n                          <div  class=\" mx-1 px-3 py-1 float-start rounded-2  fs-6 epilogue-bold mb-1\">${tags}<\/div>\r\n                          <\/div>\r\n                        <\/div>\r\n                      <\/div>\r\n                      <i class=\"fa fa-heart-o template-color  fs-2 float-end position-absolute\" style=\"right: 15px;top: 15px;\"><\/i>\r\n                       <label id=\"${oid}\" style=\"width:100px;float: right;\"><\/label>\r\n                      <div class=\"d-flex flex-column justify-content-between align-items-sm-center align-items-md-stretch align-items-xs-center\" style=\"min-width: 110px;\">\r\n                        <div class=\"mb-3\">\r\n                      \r\n                        \r\n                        <\/div>\r\n                        <input type=\"text\" id=\"review\" name=\"review\" placeholder=\"Note *\" disabled class=\"epilogue-regular\" style=\"width:100px\" />\r\n                        <div class=\"d-md-flex justify-content-between mt-3\">\r\n                          ${star}\r\n                        <\/div>\r\n                      <\/div>\r\n                    <\/div>\r\n                    <\/a>\r\n                        \t`;\r\n\r\n                result.appendChild(li);\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function tabFilterReload(value) {\r\n            var filterValue = value;\r\n            listItems.forEach(item => {\r\n                var userInfo = $(item).children('.user-info');\r\n                var review = $(userInfo).children('.review-box');\r\n                var reviewValue = $(review).find(\":selected\").text();\r\n                if (filterValue == \"All\") {\r\n                    item.classList.remove('hide');\r\n                }\r\n                else {\r\n                    if (reviewValue == filterValue) {\r\n                        item.classList.remove('hide');\r\n                    } else {\r\n                        item.classList.add('hide');\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        $(document).keypress(\r\n            function (event) {\r\n                if (event.which == '13') {\r\n                    event.preventDefault();\r\n                    var sc=$(\"save_title_advancedSearch\").val();\r\n                    var keywrodsValue = $(\"#keywords\").val();\r\n                    if(sc!=''){\r\n                         $(\"#confirmSaveSearch\").click();\r\n                    }else if (keywrodsValue != ''){\r\n                         $(\"#submit\").click();\r\n                    }\r\n                       \r\n                }\r\n            });\r\n\r\n        function sort_by_key(array, key) {\r\n            return array.sort(function (a, b) {\r\n                var x = a['_source'][key]; var y = b['_source'][key];\r\n                return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n            });\r\n        }\r\n\r\n        function closeZeroFilterModal() {\r\n            var spanFilter = document.getElementsByClassName(\"close-modal\")[2];\r\n            spanFilter.click();\r\n            window.location.href = 'talents';\r\n        }\r\n        \r\n        function ModalCallOut(x){\r\n                             \r\n                    // Get the modal\r\n                    var modalFilters = document.getElementById(\"myModal-Error\");\r\n                    var modalmessage=modalFilters.getElementsByClassName('color-blue-1 p-2 text-center w-100 epilogue-semiBold')[0].innerHTML=x;\r\n                    \r\n                    // Get the <span> element that closes the modal\r\n                    var spanFilter = document.getElementsByClassName(\"close-modal\")[2];\r\n\r\n\r\n                    // When the user clicks on <span> (x), close the modal\r\n                    spanFilter.onclick = function () {\r\n                        modalFilters.style.display = \"none\";\r\n                    }\r\n\r\n\r\n                    modalFilters.style.display = \"block\";\r\n                    apiResult.value = '';\r\n                    window.addEventListener(\"click\", function (e) {\r\n                        if (e.target == modalFilters) {\r\n                            modalFilters.style.display = \"none\";\r\n                          //  window.location.href = '5704E3A4FC224543A4E84D24A2B1DD96';\r\n                        }\r\n                    });\r\n        }\r\n        function LastFirstButtons(list){\r\n            $('.nav-pagination').append('<div class=\"btn-next\"> <i class=\"fa fa-angle-right\" style=\"font-size:14px\"><\/i> <\/div><div class=\"btn-last\"> <i class=\"fa fa-angle-double-right\" style=\"font-size:14px;\"><\/i> <\/div>');\r\n            $('.nav-pagination').prepend('<div class=\"btn-first\"> <i class=\"fa fa-angle-double-left\" style=\"font-size:14px;\"><\/i> <\/div><div class=\"btn-prev\"> <i class=\"fa fa-angle-left\" style=\"font-size:14px;\"><\/i> <\/div>');\r\n\r\n            $('.btn-next').on('click', function(){\r\n                $('.pagination .active').next().trigger('click');\r\n            })\r\n            $('.btn-prev').on('click', function(){\r\n                $('.pagination .active').prev().trigger('click');\r\n            })\r\n            $('.btn-first').on('click', function(){\r\n                list.show(1,6)\r\n            })\r\n            $('.btn-last').on('click', function(){\r\n                list.show(list.size()-5,6)\r\n            })\r\n        }\r\n\r\n        $(document).ready(function () {\r\n            sessionStorage.setItem(\"pageNav\",\"talent_search_nav\");\r\n            var apiResult = document.getElementById('result').value;\r\n            //console.log('--------------------------->',apiResult);\r\n            if (apiResult != \"\") {\r\n                if (apiResult.includes('filtersMandatory')) {\r\n                    var x='#envVariable.AdvancedSearch400Status#';\r\n                    ModalCallOut(x);\r\n\r\n               } else if(apiResult.includes('serverError')) {\r\n                  // #envVariable.AdvancedSearch400Status#\r\n                    var x='#envVariable.AdvancedSearch500Status#';\r\n                    ModalCallOut(x);\r\n                }else if(apiResult.includes('\"nb_results\":0')){\r\n                    var x='#envVariable.AdvancedSearch0Result#';\r\n                    ModalCallOut(x);\r\n                } \r\n                else {\r\n                    document.getElementById(\"empty-block\").style.display = \"none\";\r\n                    //console.log(\"------------------> DATA\")\r\n                    const queryString = window.location.search;\r\n                    const urlParams = new URLSearchParams(queryString);\r\n                    const id_search = urlParams.get('id')\r\n                    getProfile(apiResult, id_search);\r\n                    var paginationList = new List('result-div', {\r\n                        page: 6,\r\n                        pagination: true\r\n                    });\r\n                    LastFirstButtons(paginationList);\r\n\r\n                    document.getElementById('sortOption').addEventListener(\"change\", function () {\r\n                        var apiResult = document.getElementById('result').value;\r\n                        var option = document.getElementById('sortOption').value;\r\n                        const jsonSearchResultData = JSON.parse(apiResult);\r\n                        if (option == 'locationAZ') {\r\n                            var sortedArray = sort_by_key(jsonSearchResultData.results, 'location');\r\n                           // console.log(sortedArray);\r\n                         var sortedRes = '{\"results\":' + JSON.stringify(sortedArray) + ',\"nb_results\":'+jsonSearchResultData.nb_results +\"}\";\r\n                            getProfile(sortedRes, id_search);\r\n                            var paginationList = new List('result-div', {\r\n                                page: 6,\r\n                                pagination: true\r\n                            });\r\n                        } else {\r\n                            getProfile(apiResult, id_search);\r\n                            var paginationList = new List('result-div', {\r\n                                page: 6,\r\n                                pagination: true\r\n                            });\r\n                        }\r\n                    });\r\n\r\n\r\n                }\r\n            }\r\n            else {\r\n                const queryString = window.location.search;\r\n                const urlParams = new URLSearchParams(queryString);\r\n                const keywords = urlParams.get('keywords');\r\n                if (keywords != null) {\r\n                    document.getElementById('submit').click();\r\n                }\r\n            }\r\n\r\n\r\n\r\n        })\r\n\r\n    <\/script>\r\n\r\n\r\n"
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "section2",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionReadonly": "",
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [{
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field25",
                        "label": "",
                        "value": "<style>\r\n    #section_filter table td{\r\n        max-width: 1em !important;\r\n    }\r\n    thead{\r\n        display:none!important;\r\n      \r\n    }\r\n    .users-list li img {\r\n    margin-bottom: 35px;\r\n    }\r\n<\/style>\r\n<script>\r\n$(document).ready(function () {\r\n    var f = document\r\n      .getElementsByClassName(\"accord\")\r\n      .item(0)\r\n      .childNodes.item(2)\r\n      .childNodes.item(9)\r\n      .childNodes.item(1);\r\n    var f1 = document\r\n      .getElementsByClassName(\"accord\")\r\n      .item(0)\r\n      .childNodes.item(3)\r\n      .childNodes.item(5)\r\n      .childNodes.item(1);\r\n    var f2 = document\r\n      .getElementsByClassName(\"accord\")\r\n      .item(0)\r\n      .childNodes.item(4)\r\n      .childNodes.item(5)\r\n      .childNodes.item(1);\r\n    f.setAttribute(\"id\", \"firstForm\");\r\n    f1.setAttribute(\"id\", \"secondForm\");\r\n    f2.setAttribute(\"id\", \"thirdForm\");\r\n    var firstClicked = 0;\r\n    var secondClicked = 0;\r\n    var thirdClicked = 0;\r\n  \r\n    var form = f.childNodes;\r\n    //console.log(form.length);\r\n  \r\n    while (form.length != 7) {\r\n      var elm = form.item(3);\r\n      f.removeChild(elm);\r\n      //console.log(\"------------- REMOVED 1 ----------\");\r\n      firstClicked++;\r\n    }\r\n    var form1 = f1.childNodes;\r\n  \r\n    while (form1.length != 7) {\r\n      var elm = form1.item(3);\r\n      f1.removeChild(elm);\r\n      //console.log(\"------------- REMOVED  2----------\");\r\n      secondClicked++;\r\n    }\r\n  \r\n    var form2 = f2.childNodes;\r\n    while (form2.length != 7) {\r\n      var elm = form2.item(3);\r\n      f2.removeChild(elm);\r\n      //console.log(\"------------- REMOVED  2----------\");\r\n      thirdClicked++;\r\n    }\r\n  \r\n    var table1 = form.item(3).childNodes;\r\n    var table2 = form1.item(3).childNodes;\r\n    var table3 = form2.item(3).childNodes;\r\n    // var thead1 = table1.item(1);\r\n    // var thead2 = table2.item(1);\r\n    // var thead3 = table3.item(1);\r\n    var t1 = table1.item(3);\r\n    var tbody1 = t1;\r\n  \r\n    var tbody2 = table2.item(3);\r\n    var tbody3 = table3.item(3);\r\n    var button1 = form.item(5).childNodes.item(1);\r\n    var button2 = form1.item(5).childNodes.item(1);\r\n    var button3 = form2.item(5).childNodes.item(1);\r\n    var submitButton = document.getElementById(\"submit\");\r\n    \r\n  \r\n    initiateHideBtn1();\r\n    initiateHideBtn2();\r\n    initiateHideBtn3();\r\n    returnBtn(tbody1, button1, firstClicked);\r\n    returnBtn(tbody2, button2, secondClicked);\r\n    returnBtn(tbody3, button3, thirdClicked);\r\n    function returnBtn(x, y, z) {\r\n      x.addEventListener(\"click\", function () {\r\n        //console.log(\"clicked ===== >\", z);\r\n        if (x.childNodes.length < 4 + z) {\r\n          y.style.display = \"unset\";\r\n        }\r\n      });\r\n    }\r\n  \r\n    // thead1.style.display = \"none\";\r\n    // thead2.style.display = \"none\";\r\n    // thead3.style.display = \"none\";\r\n  \r\n    button1.textContent = \" + Add a skill\";\r\n    button2.textContent = \" + Add a skill\";\r\n    button3.textContent = \" + Add a skill\";\r\n    // console.log(\"form\", form);\r\n    // console.log(\"form1\", form1);\r\n    // console.log(\"form2\", form2);\r\n    // console.log(\"table1\", table1);\r\n    // console.log(\"table2\", table2);\r\n    // console.log(\"table3\", table3);\r\n    // console.log(\"thead1\", thead1);\r\n    // console.log(\"thead2\", thead2);\r\n    // console.log(\"thead3\", thead3);\r\n    // console.log(\"button1\", button1);\r\n    // console.log(\"button2\", button2);\r\n    // console.log(\"button3\", button3);\r\n    // console.log(\"tbody1\", tbody1.childNodes);\r\n    // console.log(\"tbody2\", tbody2.childNodes);\r\n    // console.log(\"tbody3\", tbody3.childNodes);\r\n  \r\n    function initiateHideBtn1() {\r\n      if (tbody1.childNodes.length == 4 + firstClicked) {\r\n        //console.log(tbody1.childNodes.length);\r\n        button1.style.display = \"none\";\r\n      }\r\n    }\r\n    function initiateHideBtn2() {\r\n      if (tbody2.childNodes.length == 4 + secondClicked) {\r\n        button2.style.display = \"none\";\r\n      }\r\n    }\r\n    function initiateHideBtn3() {\r\n      if (tbody3.childNodes.length == 4 + thirdClicked) {\r\n        button3.style.display = \"none\";\r\n      }\r\n    }\r\n  \r\n    button1.addEventListener(\"click\", function () {\r\n      if (tbody1.childNodes.length == 3 + firstClicked) {\r\n        button1.style.display = \"none\";\r\n      }\r\n    });\r\n    button2.addEventListener(\"click\", function () {\r\n      if (tbody2.childNodes.length == 3 + secondClicked) {\r\n        button2.style.display = \"none\";\r\n      }\r\n    });\r\n    button3.addEventListener(\"click\", function () {\r\n      if (tbody3.childNodes.length == 3 + thirdClicked) {\r\n        button3.style.display = \"none\";\r\n      }\r\n    });\r\n  });\r\n<\/script>\r\n  "
                    }
                }],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "htmlSection",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "",
                "permissionReadonly": "",
                "readonly": "true",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        }
    ],
    "properties": {
        "description": "",
        "id": "advanced_search",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Advanced Talents search",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "postProcessor": {
            "className": "",
            "properties": {}
        },
        "postProcessorRunOn": "create",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.BeanShellFormBinder",
            "properties": {
                "autoHandleFiles": "",
                "autoHandleWorkflowVariable": "true",
                "cacheInterval": "",
                "script": "import org.joget.apps.form.model.FormRowSet;\r\nimport org.joget.apps.form.model.FormRow;\r\nimport org.bson.Document;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport javax.sql.DataSource;\r\nimport org.joget.commons.util.LogUtil;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.commons.util.UuidGenerator;\r\nimport org.joget.apps.form.model.FormStoreBinder;\r\nimport org.joget.plugin.base.PluginManager;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.commons.util.LogUtil;\r\n\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.client.methods.HttpGet;\r\nimport org.apache.http.client.methods.HttpRequestBase;\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClients;\r\nimport org.apache.http.HttpEntity;\r\nimport org.apache.http.util.EntityUtils;\r\nimport java.io.IOException;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.net.URLEncoder;\r\n\r\n\r\n\r\npublic String [] extractGridData(String gridData){\r\n    String grid=gridData;\r\n    grid=grid.replace(\"[\",\"\");\r\n    grid=grid.replace(\"]\",\"\");\r\n    grid=grid.replace(\"},\",\"},,\");\r\n    return grid.split(\",,\");\r\n}\r\n\r\npublic String [] getSkills(String skills_category, String [] res){\r\n    \r\n    int i=0;\r\n    if(rows.get(0).getProperty(skills_category)!=null && rows.get(0).getProperty(skills_category).length()>2)\r\n    {\r\n    String [] records=extractGridData(rows.get(0).getProperty(skills_category));\r\n        for(String record:records){\r\n            Document doc= Document.parse(record);\r\n            String key = doc.getString(\"skill_name\").toLowerCase();\r\n            res[i]=key;\r\n            i+=1;\r\n           \r\n        }\r\n    }\r\n   \r\n    return res;\r\n \r\n}\r\n\r\npublic String [] getSkillsExp(String skills_category, String [] res){\r\n    \r\n    int i=0;\r\n    if(rows.get(0).getProperty(skills_category)!=null && rows.get(0).getProperty(skills_category).length()>2)\r\n    {\r\n    String [] records=extractGridData(rows.get(0).getProperty(skills_category));\r\n        for(String record:records){\r\n            Document doc= Document.parse(record);\r\n            String key = doc.getString(\"exp_skill\").toLowerCase();\r\n            res[i]=key;\r\n            i+=1;\r\n           \r\n        }\r\n    }\r\n   \r\n    return res;\r\n \r\n}\r\n\r\npublic String getSkillsTag(String skills_category,String res){\r\n    \r\n    if(rows.get(0).getProperty(skills_category)!=null && rows.get(0).getProperty(skills_category).length()>2)\r\n    {\r\n    String [] records=extractGridData(rows.get(0).getProperty(skills_category));\r\n        for(String record:records){\r\n            Document doc= Document.parse(record);\r\n            String key = doc.getString(\"skill_name\");\r\n            if(res.equals(\"\"))\r\n                res=skills_category+\": \"+key;\r\n            else\r\n                res+=\",\"+ skills_category+\": \"+key;\r\n        }\r\n    }\r\n   \r\n    return res;\r\n \r\n}\r\n\r\nString tags=\"\";\r\ntags=getSkillsTag(\"mandatory_skills\",tags);\r\ntags=getSkillsTag(\"nth_skills\",tags);\r\ntags=getSkillsTag(\"opt_skills\",tags);\r\n\r\npublic String setTags(){\r\n        \r\n    String [] mandatory={\"\",\"\",\"\"};\r\n    String [] exp_mandatory={\"\",\"\",\"\"};\r\n    String [] nice_to_have={\"\",\"\",\"\"};\r\n    String [] exp_nth={\"\",\"\",\"\"};\r\n    String [] optional={\"\",\"\",\"\"};\r\n    String [] exp_optional={\"\",\"\",\"\"};\r\n    String keywords=\"\";\r\n    String job=\"\";\r\n    String location=\"\";\r\n    String school=\"\";\r\n    String degree=\"\";\r\n    String certification=\"\";\r\n    String spoken_languages=\"\";\r\n    String min_years_of_exp=\"\";\r\n    String max_years_of_exp=\"\";\r\n    String levelOfEducation=\"\";\r\n    String fieldOfStudy=\"\";\r\n    \r\n    \r\n    mandatory=getSkills(\"mandatory_skills\",mandatory);\r\n    //System.out.println(\"///////////////////--------------------------->MNDT: \"+mandatory[0]+\"/\"+mandatory[1]+\"/\"+mandatory[2]);\r\n    \r\n    nice_to_have=getSkills(\"nth_skills\",nice_to_have);\r\n    //System.out.println(\"--------------------------->NTH: \"+nice_to_have[0]+\"/\"+nice_to_have[1]+\"/\"+nice_to_have[2]);\r\n    \r\n    optional=getSkills(\"opt_skills\",optional);\r\n    //System.out.println(\"--------------------------->OPT: \"+optional[0]+\"/\"+optional[1]+\"/\"+optional[2]);\r\n    \r\n    exp_mandatory=getSkillsExp(\"mandatory_skills\",exp_mandatory);\r\n    //System.out.println(\"///////////////////--------------------------->MNDT EXP: \"+exp_mandatory[0]+\"/\"+exp_mandatory[1]+\"/\"+exp_mandatory[2]);\r\n    \r\n    exp_nth=getSkillsExp(\"nth_skills\",exp_nth);\r\n    //System.out.println(\"--------------------------->NTH: \"+exp_nth[0]+\"/\"+exp_nth[1]+\"/\"+exp_nth[2]);\r\n    \r\n    exp_optional=getSkillsExp(\"opt_skills\",exp_optional);\r\n    //System.out.println(\"--------------------------->OPT: \"+exp_optional[0]+\"/\"+exp_optional[1]+\"/\"+exp_optional[2]);\r\n    \r\n    if(!rows.get(0).getProperty(\"keywords\").equals(\"\"))\r\n    {\r\n        keywords=rows.get(0).getProperty(\"keywords\");\r\n        if(tags.equals(\"\"))\r\n            tags=\"keywords: \"+keywords;\r\n        else\r\n            tags+=\", keywords: \"+keywords;\r\n     // System.out.println(\"--------------------------->Keywords: \"+keywords);\r\n    }\r\n    if(!rows.get(0).getProperty(\"job\").equals(\"\"))\r\n    {\r\n      job=rows.get(0).getProperty(\"job\");\r\n      job=job.toLowerCase();\r\n      if(tags.equals(\"\"))\r\n            tags=\"job: \"+job;\r\n        else\r\n            tags+=\", job: \"+job;\r\n      //System.out.println(\"--------------------------->job: \"+job);\r\n    }\r\n    if(!rows.get(0).getProperty(\"location\").equals(\"\"))\r\n    {\r\n      location=rows.get(0).getProperty(\"location\");\r\n      location=location.toLowerCase();\r\n      if(tags.equals(\"\"))\r\n            tags=\"location: \"+location;\r\n        else\r\n            tags+=\", location: \"+location;\r\n      //System.out.println(\"--------------------------->location: \"+location);\r\n    }\r\n    if(!rows.get(0).getProperty(\"school\").equals(\"\"))\r\n    {\r\n      school=rows.get(0).getProperty(\"school\");\r\n      school=school.toLowerCase();\r\n      if(tags.equals(\"\"))\r\n            tags=\"school: \"+school;\r\n        else\r\n            tags+=\", school: \"+school;\r\n      //System.out.println(\"--------------------------->school: \"+school);\r\n    }\r\n    if(!rows.get(0).getProperty(\"level_of_education\").equals(\"\"))\r\n    {\r\n      levelOfEducation=rows.get(0).getProperty(\"level_of_education\");\r\n      levelOfEducation=levelOfEducation.toLowerCase();\r\n      if(tags.equals(\"\"))\r\n            tags=\"level of education: \"+levelOfEducation;\r\n        else\r\n            tags+=\", level of education: \"+levelOfEducation;\r\n      //System.out.println(\"--------------------------->level_of_education: \"+levelOfEducation);\r\n    }\r\n    if(!rows.get(0).getProperty(\"field_of_study\").equals(\"\"))\r\n    {\r\n      fieldOfStudy=rows.get(0).getProperty(\"field_of_study\");\r\n      fieldOfStudy=fieldOfStudy.toLowerCase();\r\n      if(tags.equals(\"\"))\r\n            tags=\"field of study: \"+fieldOfStudy;\r\n        else\r\n            tags+=\", field of study: \"+fieldOfStudy;\r\n      //System.out.println(\"--------------------------->field_of_study: \"+fieldOfStudy);\r\n    }\r\n    if(!rows.get(0).getProperty(\"certification\").equals(\"\"))\r\n    {\r\n        String certifTags=\"\";\r\n        if(rows.get(0).getProperty(\"certification\").contains(\";\")){\r\n            certification=rows.get(0).getProperty(\"certification\").replaceAll(\";\",\" \");\r\n            certifTags=rows.get(0).getProperty(\"certification\").replaceAll(\";\",\",\");\r\n        }\r\n        else{\r\n            certification=rows.get(0).getProperty(\"certification\");\r\n            certifTags=rows.get(0).getProperty(\"certification\");\r\n        }\r\n            \r\n        if(tags.equals(\"\"))\r\n            tags=\"certifications: \"+certifTags;\r\n        else\r\n            tags+=\", certifications: \"+certifTags;\r\n        \r\n        certification=certification.toLowerCase();\r\n        //System.out.println(\"--------------------------->certification: \"+certification);\r\n    }\r\n    if(!rows.get(0).getProperty(\"spoken_languages\").equals(\"\"))\r\n    {\r\n        String languagesTags=\"\";\r\n        if(rows.get(0).getProperty(\"spoken_languages\").contains(\";\")){\r\n            spoken_languages=rows.get(0).getProperty(\"spoken_languages\").replaceAll(\";\",\" \");\r\n            languagesTags=rows.get(0).getProperty(\"spoken_languages\").replaceAll(\";\",\",\");\r\n        }\r\n        else{\r\n            spoken_languages=rows.get(0).getProperty(\"spoken_languages\");\r\n            languagesTags=rows.get(0).getProperty(\"spoken_languages\");\r\n        }\r\n            \r\n        if(tags.equals(\"\"))\r\n            tags=\"spoken languages: \"+languagesTags;\r\n        else\r\n            tags+=\", spoken languages: \"+languagesTags;\r\n            \r\n        spoken_languages=spoken_languages.toLowerCase();\r\n        //System.out.println(\"--------------------------->spoken_languages: \"+spoken_languages);\r\n    }\r\n    return tags;\r\n}\r\n\r\n// consume API\r\npublic String searchAPI(){\r\n    \r\n    String [] mandatory={\"\",\"\",\"\"};\r\n    String [] exp_mandatory={\"\",\"\",\"\"};\r\n    String [] nice_to_have={\"\",\"\",\"\"};\r\n    String [] exp_nth={\"\",\"\",\"\"};\r\n    String [] optional={\"\",\"\",\"\"};\r\n    String [] exp_optional={\"\",\"\",\"\"};\r\n    String keywords=\"\";\r\n    String job=\"\";\r\n    String location=\"\";\r\n    String school=\"\";\r\n    String degree=\"\";\r\n    String certification=\"\";\r\n    String spoken_languages=\"\";\r\n    String min_years_of_exp=\"\";\r\n    String max_years_of_exp=\"\";\r\n    String levelOfEducation=\"\";\r\n    String fieldOfStudy=\"\";\r\n    \r\n    \r\n    mandatory=getSkills(\"mandatory_skills\",mandatory);\r\n    //System.out.println(\"///////////////////--------------------------->MNDT: \"+mandatory[0]+\"/\"+mandatory[1]+\"/\"+mandatory[2]);\r\n    \r\n    nice_to_have=getSkills(\"nth_skills\",nice_to_have);\r\n    //System.out.println(\"--------------------------->NTH: \"+nice_to_have[0]+\"/\"+nice_to_have[1]+\"/\"+nice_to_have[2]);\r\n    \r\n    optional=getSkills(\"opt_skills\",optional);\r\n    //System.out.println(\"--------------------------->OPT: \"+optional[0]+\"/\"+optional[1]+\"/\"+optional[2]);\r\n    \r\n    exp_mandatory=getSkillsExp(\"mandatory_skills\",exp_mandatory);\r\n    //System.out.println(\"///////////////////--------------------------->MNDT EXP: \"+exp_mandatory[0]+\"/\"+exp_mandatory[1]+\"/\"+exp_mandatory[2]);\r\n    \r\n    exp_nth=getSkillsExp(\"nth_skills\",exp_nth);\r\n    //System.out.println(\"--------------------------->NTH: \"+exp_nth[0]+\"/\"+exp_nth[1]+\"/\"+exp_nth[2]);\r\n    \r\n    exp_optional=getSkillsExp(\"opt_skills\",exp_optional);\r\n    //System.out.println(\"--------------------------->OPT: \"+exp_optional[0]+\"/\"+exp_optional[1]+\"/\"+exp_optional[2]);\r\n    \r\n    if(!rows.get(0).getProperty(\"keywords\").equals(\"\"))\r\n    {\r\n        keywords=rows.get(0).getProperty(\"keywords\");\r\n      \r\n    }\r\n    if(!rows.get(0).getProperty(\"job\").equals(\"\"))\r\n    {\r\n      job=rows.get(0).getProperty(\"job\");\r\n      job=job.toLowerCase();\r\n    \r\n    }\r\n    if(!rows.get(0).getProperty(\"location\").equals(\"\"))\r\n    {\r\n      location=rows.get(0).getProperty(\"location\");\r\n      location=location.toLowerCase();\r\n    \r\n      //System.out.println(\"--------------------------->location: \"+location);\r\n    }\r\n    if(!rows.get(0).getProperty(\"school\").equals(\"\"))\r\n    {\r\n      school=rows.get(0).getProperty(\"school\");\r\n      school=school.toLowerCase();\r\n     \r\n      //System.out.println(\"--------------------------->school: \"+school);\r\n    }\r\n    if(!rows.get(0).getProperty(\"level_of_education\").equals(\"\"))\r\n    {\r\n      levelOfEducation=rows.get(0).getProperty(\"level_of_education\");\r\n      levelOfEducation=levelOfEducation.toLowerCase();\r\n     \r\n    }\r\n    if(!rows.get(0).getProperty(\"field_of_study\").equals(\"\"))\r\n    {\r\n      fieldOfStudy=rows.get(0).getProperty(\"field_of_study\");\r\n      fieldOfStudy=fieldOfStudy.toLowerCase();\r\n     \r\n      //System.out.println(\"--------------------------->field_of_study: \"+fieldOfStudy);\r\n    }\r\n    if(!rows.get(0).getProperty(\"certification\").equals(\"\"))\r\n    {\r\n        String certifTags=\"\";\r\n        if(rows.get(0).getProperty(\"certification\").contains(\";\")){\r\n            certification=rows.get(0).getProperty(\"certification\").replaceAll(\";\",\" \");\r\n            certifTags=rows.get(0).getProperty(\"certification\").replaceAll(\";\",\",\");\r\n        }\r\n        else{\r\n            certification=rows.get(0).getProperty(\"certification\");\r\n            certifTags=rows.get(0).getProperty(\"certification\");\r\n        }\r\n            \r\n       \r\n        \r\n        certification=certification.toLowerCase();\r\n        //System.out.println(\"--------------------------->certification: \"+certification);\r\n    }\r\n    if(!rows.get(0).getProperty(\"spoken_languages\").equals(\"\"))\r\n    {\r\n        String languagesTags=\"\";\r\n        if(rows.get(0).getProperty(\"spoken_languages\").contains(\";\")){\r\n            spoken_languages=rows.get(0).getProperty(\"spoken_languages\").replaceAll(\";\",\" \");\r\n            languagesTags=rows.get(0).getProperty(\"spoken_languages\").replaceAll(\";\",\",\");\r\n        }\r\n        else{\r\n            spoken_languages=rows.get(0).getProperty(\"spoken_languages\");\r\n            languagesTags=rows.get(0).getProperty(\"spoken_languages\");\r\n        }\r\n            \r\n      \r\n            \r\n        spoken_languages=spoken_languages.toLowerCase();\r\n        //System.out.println(\"--------------------------->spoken_languages: \"+spoken_languages);\r\n    }\r\n    \r\n    min_years_of_exp=rows.get(0).getProperty(\"min_years_exp\");\r\n    //System.out.println(\"--------------------------->Min years of exp: \"+min_years_of_exp);\r\n    max_years_of_exp=rows.get(0).getProperty(\"max_years_exp\");\r\n    //System.out.println(\"--------------------------->Maw years of exp: \"+max_years_of_exp);\r\n    \r\n    \r\n    // LogUtil.info(\"-------------------------------------------------------->Tags: \"+tags,\"\");\r\n    \r\n    try{\r\n\r\n        String newVersionUrl = \"#envVariable.elasticsearch_hirevioo_url_api#/search/talents/profiles?keywords=\"+URLEncoder.encode(keywords, StandardCharsets.UTF_8)\r\n        +\"&mndt_skill_1=\"+URLEncoder.encode(mandatory[0], StandardCharsets.UTF_8)\r\n        +\"&mndt_skill_2=\"+URLEncoder.encode(mandatory[1], StandardCharsets.UTF_8)\r\n        +\"&mndt_skill_3=\"+URLEncoder.encode(mandatory[2], StandardCharsets.UTF_8)\r\n        +\"&exp_mndt_skill_1=\"+URLEncoder.encode(exp_mandatory[0], StandardCharsets.UTF_8)\r\n        +\"&exp_mndt_skill_2=\"+URLEncoder.encode(exp_mandatory[1], StandardCharsets.UTF_8)\r\n        +\"&exp_mndt_skill_3=\"+URLEncoder.encode(exp_mandatory[2], StandardCharsets.UTF_8)\r\n        +\"&opt_skill_1=\"+URLEncoder.encode(optional[0], StandardCharsets.UTF_8)\r\n        +\"&opt_skill_2=\"+URLEncoder.encode(optional[1], StandardCharsets.UTF_8)\r\n        +\"&opt_skill_3=\"+URLEncoder.encode(optional[2], StandardCharsets.UTF_8)\r\n        +\"&exp_opt_skill_1=\"+URLEncoder.encode(exp_optional[0], StandardCharsets.UTF_8)\r\n        +\"&exp_opt_skill_2=\"+URLEncoder.encode(exp_optional[1], StandardCharsets.UTF_8)\r\n        +\"&exp_opt_skill_3=\"+URLEncoder.encode(exp_optional[2], StandardCharsets.UTF_8)\r\n        +\"&nth_skill_1=\"+URLEncoder.encode(nice_to_have[0], StandardCharsets.UTF_8)\r\n        +\"&nth_skill_2=\"+URLEncoder.encode(nice_to_have[1], StandardCharsets.UTF_8)\r\n        +\"&nth_skill_3=\"+URLEncoder.encode(nice_to_have[2], StandardCharsets.UTF_8)\r\n        +\"&exp_nth_skill_1=\"+URLEncoder.encode(exp_nth[0], StandardCharsets.UTF_8)\r\n        +\"&exp_nth_skill_2=\"+URLEncoder.encode(exp_nth[1], StandardCharsets.UTF_8)\r\n        +\"&exp_nth_skill_3=\"+URLEncoder.encode(exp_nth[2], StandardCharsets.UTF_8)\r\n        +\"&job_title=\"+URLEncoder.encode(job, StandardCharsets.UTF_8)\r\n        +\"&exp_min=\"+Integer.parseInt(min_years_of_exp)\r\n        +\"&exp_max=\"+Integer.parseInt(max_years_of_exp)\r\n        +\"&certifications=\"+URLEncoder.encode(certification, StandardCharsets.UTF_8)\r\n        +\"&school=\"+URLEncoder.encode(school, StandardCharsets.UTF_8)\r\n        +\"&level_education=\"+URLEncoder.encode(levelOfEducation, StandardCharsets.UTF_8)\r\n        +\"&field_study=\"+URLEncoder.encode(fieldOfStudy, StandardCharsets.UTF_8)\r\n        +\"&languages=\"+URLEncoder.encode(spoken_languages, StandardCharsets.UTF_8)\r\n        +\"&location=\"+URLEncoder.encode(location, StandardCharsets.UTF_8);\r\n        \r\n        LogUtil.info(newVersionUrl,\"\");\r\n        \r\n        CloseableHttpClient client = null;\r\n        CloseableHttpClient client = HttpClients.createDefault();\r\n     \r\n        HttpRequestBase request = null;\r\n        request = new HttpGet(newVersionUrl);\r\n    \r\n        HttpResponse response = client.execute(request);\r\n        int statusCode = response.getStatusLine().getStatusCode();\r\n        if(statusCode==200){\r\n        HttpEntity entity = response.getEntity();\r\n        // Read the contents of an entity and return it as a String.\r\n        String res = EntityUtils.toString(entity,StandardCharsets.UTF_8);\r\n        request.releaseConnection();\r\n        client.close();\r\n        return res;\r\n        }\r\n        else if(statusCode==400){\r\n            return \"filtersMandatory\";\r\n        }else{\r\n            return \"serverError\";\r\n      \r\n        }\r\n     \r\n    } catch (Exception ex) {\r\n            System.out.println(ex);\r\n    }\r\n}\r\n\r\n\r\n\r\npublic FormRowSet store(Element element, FormRowSet rows, FormData formData) {\r\n     String tags2=\"\";\r\n    //check the rows is not empty before store it\r\n    if (rows != null && !rows.isEmpty()) {\r\n        //Get the submitted data\r\n        FormRow row = rows.get(0);\r\n      \r\n        row.setProperty(\"result\", searchAPI());\r\n        tags2=setTags();\r\n        row.setProperty(\"tags\", tags2);\r\n        //Reuse Workflow Form Binder to store data\r\n        PluginManager pluginManager = (PluginManager) AppUtil.getApplicationContext().getBean(\"pluginManager\");\r\n        FormStoreBinder binder = (FormStoreBinder) pluginManager.getPlugin(\"org.joget.apps.form.lib.WorkflowFormBinder\");\r\n        binder.store(element, rows, formData);\r\n    }\r\n     \r\n    return rows;\r\n}\r\n \r\n//call store method with injected variable\r\nreturn store(element, rows, formData);\r\n\r\n"
            }
        },
        "tableName": "advanced_search_form"
    }
}