{
    "className": "org.joget.apps.form.model.Form",
    "elements": [
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field23",
                            "label": "",
                            "value": "<style>\ninput#keywords {\n    margin-bottom: 15px !important;\n}\n.form-cell.accordion-form.mt-4:has(#University_chosen) {\n    display: none;\n}\n.form-cell.accordion-form.mt-4:has(#speciality_chosen) {\n    display: none;\n}\n.form-cell.accordion-form.mt-4:has(#research_structure_chosen) {\n    display: none;\n}\n.btn input:focus {\n\n    outline: none!important;\n  \n}\n    #submit{\n        display:none!important;\n    }\n#submitoparent{\n    font-style: inherit;\n    border: 1px solid #614ac1 !important;\n    padding: 5px 11px !important;\n}\n\n#submitoparent input{\n    font-size:12px;\n}\n<\/style>\n<div class=\"d-flex align-items-center justify-content-between w-100\">\n   <button type=\"button\" class=\"clear-btn mx-1 px-3 btn-red float-start rounded-2  fs-6  btn  clear-btn epilogue-semiBold\" onclick=\"window.location.replace('labs');\">Clear<\/button>\n  \n       \n    <i id=\"submitoparent\" class=\"form-button btn button btn-blue float-start rounded-2 fs-6 epilogue-semibold waves-input-wrapper waves-effect btn waves-button waves-float\" style=\"color:rgb(255, 255, 255);background:rgba(0, 0, 0, 0)\"><input id=\"submito\" onClick=\"submitForm()\" name=\"submito\" class=\"waves-button-input\" type=\"button\" value=\"Show results\"  style=\"background-color:rgba(0,0,0,0);\"><\/i>\n\n\n\n<\/div>\n\n<script>\n\nfunction submitForm(){\n     var keywords = \"\";\n                    var industry =\"\";\n                    var location = \"\";\n                    var tags=\"\";\n                    if(FormUtil.getValue(\"keywords\")!=null){\n                        if (tags==\"\")\n                            tags += \"keywords: \" + FormUtil.getValue(\"keywords\");\n                        else\n                            tags += \",keywords: \" + FormUtil.getValue(\"keywords\");\n                    }\n                        \n                    if(FormUtil.getValue(\"industry\")!=null){\n                         if (tags==\"\")\n                            tags += \"industry: \" + FormUtil.getValues(\"industry\");\n                        else\n                            tags += \",industry: \" + FormUtil.getValues(\"industry\");\n                    }    \n                        \n                    if(FormUtil.getValue(\"location\")!=null){\n                         if (tags==\"\")\n                            tags += \"location: \" + FormUtil.getValues(\"location\");\n                        else\n                            tags += \",location: \" + FormUtil.getValues(\"location\");\n                    }\n                    document.getElementById('tags').value=tags;\n                    document.getElementById('submit').click();\n}\nfunction clearFonction() {\n    \n    //keywords\n    document.getElementById('keywords').value='';\n\n    //reperters\n    var deleteRepeter= document.getElementsByClassName('repeater-action-delete')\n    console.log(\"deleteRepeter: \", deleteRepeter);\n    var deleteRepeterLength=deleteRepeter.length;\n    if(deleteRepeterLength>0) {\n        while( deleteRepeterLength != 0) {\n            deleteRepeter[deleteRepeterLength-1].click();\n            deleteRepeterLength--;\n        }\n    }\n    \n    var repetersAddBtn=document.querySelectorAll('.repeater-actions-add');\n    for (var repBtn of repetersAddBtn) {\n        repBtn.style.display='unset';\n    }\n\n    //Slider\n    $(\".ui-state-default:first\").text('0');\n    $(\".ui-state-default\").slice(1).text('35');\n    var v = [0, 35];\n        $(\"#slider_years_experience_years_experience\").slider({\n            range: true,\n            min: 0,\n            max: 35,\n            values: v,\n            slide: function(event, ui) {\n            //return false;\n              if ((ui.values[1] - ui.values[0]) < 2) {\n    \t          return false;\n              }\n              $(\".ui-state-default:first\").text(ui.values[0]);\n              $(\".ui-state-default\").slice(1).text(ui.values[1]);\n              document.getElementById('min_years_exp').value=ui.values[0];\n              document.getElementById('max_years_exp').value=ui.values[1];\n            },\n            create: function(event, ui) {\n                $(\".ui-state-default:first\").text(v[0]);\n                $(\".ui-state-default\").slice(1).text(v[1]);\n                \n            }\n        }).trigger('slide');\n\n    document.getElementById('min_years_exp').value=0;\n    document.getElementById('max_years_exp').value=35;\n\n    //Ajax single selection\n    document.getElementById('job').innerHTML=\"\";\n    document.getElementById('location').innerHTML=\"\";\n    document.getElementById('level_of_education').innerHTML=\"\";\n    document.getElementById('field_of_study').innerHTML=\"\";\n    var ajaxSingle=document.querySelectorAll('.chosen-single');\n    var placeholders=['Job title',\n    'Current location',\n    'Level of education',\n    'Field of study'];\n    var index=0;\n\n    for (var itemSingle of ajaxSingle) {\n        itemSingle.className=\"chosen-single chosen-default\";\n        itemSingle.innerHTML=`<span>${placeholders[index]}<\/span><div><b><\/b><\/div>`;\n        index++;\n    }\n    \n    //Ajax multi selection\n    var ajaxMulti=document.getElementsByClassName('search-choice-close');\n    console.log(ajaxMulti);\n    var ajaxMultiLength=ajaxMulti.length;\n    if(ajaxMultiLength>0) {\n        while( ajaxMultiLength != 0) {\n            ajaxMulti[ajaxMultiLength-1].click();\n            ajaxMultiLength--;\n        }\n    }\n\n}\n\n<\/script>\n"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "accor",
                            "label": "",
                            "value": "<style>\n    #save{\n        float:right;\n        display:none;\n    }\n    \n    /* The Modal (background) */\n    .modal {\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      z-index: 1; /* Sit on top */\n      left: 0;\n      top: 0;\n      width: 100%; /* Full width */\n      height: 100%; /* Full height */\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    }\n    \n    /* Modal Content/Box */\n    .modal-content {\n      background-color: #fefefe;\n      margin: 15% auto;/* 15% from the top and centered */\n      padding: 20px;\n      border: 1px solid #888;\n      width: 500px; /* Could be more or less, depending on screen size */\n    }\n    \n    /* The Close Button */\n    .close {\n      color: #aaa;\n      float: right;\n      font-size: 50px;\n      font-weight: bold;\n    }\n    \n    .close:hover,\n    .close:focus {\n      color: black;\n      text-decoration: none;\n      cursor: pointer;\n    }\n    \n    .hr{\n       height:1px;\n       border-width:0;\n       color:gray;\n       background-color:gray \n    }\n<\/style>\n\n      <div class=\"acc\">\n    <div class=\"acc__card\">\n      <div class=\"acc__title template-color epilogue-bold\">Filters<\/div>\n      <div class=\"acc__panel\">\n         <div class=\"oo\"><\/div>\n      <\/div>\n    <\/div>\n \n\n  <\/div>\n<input type=\"button\" value=\"Save\" id=\"save\" disabled/>\n\n<div id=\"myModal\" class=\"modal\">\n\n  <!-- Modal content -->\n  <div class=\"modal-content\">\n    <span class=\"close\">&times;<\/span>\n    <div id=\"modal-msg\">\n         <div>\n                <label>SAVE A SEARCH<\/label>\n                <input id=\"save_title\"  type=\"text\" value=\"\">\n          <\/div>\n    <\/div>\n    <input type=\"button\" value=\"Save\" id=\"confirmSave\"/>\n\n  <\/div>\n<\/div>\n\n\n\n\n\n<script>\nwindow.onload=function(){\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const id = urlParams.get('id')\n    if(id!=null){\n        document.getElementById('save').disabled=false;\n    }\n}\n\n$(document).ready(function(){\n// Get the modal\nvar modal = document.getElementById(\"myModal\");\n\n// Get the <span> element that closes the modal\nvar span = document.getElementsByClassName(\"close\")[0];\n\n// When the user clicks on <span> (x), close the modal\nspan.onclick = function() {\n  modal.style.display = \"none\";\n}\n\n// When the user clicks anywhere outside of the modal, close it\nwindow.onclick = function(event) {\n  if (event.target == modal) {\n    modal.style.display = \"none\";\n  }\n}\n\nvar save = document.getElementById(\"save\");\n\nsave.onclick = function() {\n  modal.style.display = \"block\";\n}\n\nvar confirmSave=document.getElementById(\"confirmSave\");\n\nconfirmSave.onclick = function() {\n    var title=document.getElementById(\"save_title\").value;\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const idsearch = urlParams.get('id')\n    var uri='E8C088A2B0B84F34AED8BDF7126FDC38?id='+idsearch+'&title='+title;\n           \n    window.location.replace(uri);\n}\n\n})\n\n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "id": "keywords",
                            "label": "Keyword",
                            "maxlength": "40",
                            "placeholder": "Keyword",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "University",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "",
                            "listId": "industry_data_list",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "",
                            "placeholder": "University",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "institution",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Institution",
                            "listId": "institution_data_list",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "",
                            "placeholder": "Institution",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "speciality",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "",
                            "listId": "specialities_list_data",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "true",
                            "placeholder": "Speciality",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "research_structure",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "",
                            "listId": "specialities_list_data",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "true",
                            "placeholder": "Research Structure",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "research_topics",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Research Topics",
                            "listId": "topicsdata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "true",
                            "placeholder": "Research Topics",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "40%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field18",
                            "label": "",
                            "value": "\r\n\t<style>\r\n\t\r\n        .ui-slider { position: relative; text-align: left; }\r\n        .ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 1.2em; height: 1.2em; cursor: default; }\r\n        .ui-slider .ui-slider-range { position: absolute; z-index: 1; font-size: .7em; display: block; border: 0; background-position: 0 0; }\r\n        \r\n        .ui-slider-horizontal { height: .8em; }\r\n        .ui-slider-horizontal .ui-slider-handle { top: -.3em; margin-left: -.6em; }\r\n        .ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; }\r\n        .ui-slider-horizontal .ui-slider-range-min { left: 0; }\r\n        .ui-slider-horizontal .ui-slider-range-max { right: 0; }\r\n        \r\n        .ui-slider-vertical { width: .8em; height: 100px; }\r\n        .ui-slider-vertical .ui-slider-handle { left: -.3em; margin-left: 0; margin-bottom: -.6em; }\r\n        .ui-slider-vertical .ui-slider-range { left: 0; width: 100%; }\r\n        .ui-slider-vertical .ui-slider-range-min { bottom: 0; }\r\n        .ui-slider-vertical .ui-slider-range-max { top: 0; }\r\n        .ui-spinner { position:relative; display: inline-block; overflow: hidden; padding: 0; vertical-align: middle; }\r\n        .ui-spinner-input { border: none; background: none; padding: 0; margin: .2em 0; vertical-align: middle; margin-left: .4em; margin-right: 22px; }\r\n        .ui-spinner-button { width: 16px; height: 50%; font-size: .5em; padding: 0; margin: 0; text-align: center; position: absolute; cursor: default; display: block; overflow: hidden; right: 0; }\r\n        .ui-spinner a.ui-spinner-button { border-top: none; border-bottom: none; border-right: none; } /* more specificity required here to overide default borders */\r\n        .ui-spinner .ui-icon { position: absolute; margin-top: -8px; top: 50%; left: 0; } /* vertical centre icon */\r\n        .ui-spinner-up { top: 0; }\r\n        .ui-spinner-down { bottom: 0; }\r\n                /*.years_experience .ui-slider {*/\r\n                /*\tmargin-top: 20px;*/\r\n                /*\theight: 7px;*/\r\n                /*\tposition: relative;*/\r\n                /*\tborder: none;*/\r\n                /*\tbackground: rgba(116, 183, 207, 0.6);*/\r\n                /*}*/\r\n                       \t.years_experience .ui-slider {\r\n\t\t\tmargin-top: 20px;\r\n\t\t\theight: 3px;\r\n\t\t\tposition: relative;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: #614ac133;\r\n\t\t}\r\n\t\t\r\n\t\ta.ui-slider-handle:hover{\r\n\t\t    cursor:pointer;\r\n\t\t    \tbackground: #ffffff !important;\r\n           border: 2px solid #0E6BB2 !important;\r\n\t\t}\r\n\t\t\ta.ui-slider-handle{\r\n\t\t    text-decoration:none;\r\n\t\t}\r\n\t\t.ui-state-hover,.ui-state-focus,.ui-slider-handle.ui-state-default.ui-corner-all:hover{\r\n\t\t  \tbackground: #614ac1 !important;\r\n            border: 2px solid #614ac1 !important;\r\n            top: -10px;\r\n            border-radius: 25px !important;\r\n            outline: none;\r\n            position: absolute;\r\n            font-family: \"Epilogue-Medium\" !important;  \r\n\t\t}\r\n\t\t.years_experience .ui-state-default, .years_experience .ui-widget-content .ui-state-default, .years_experience .ui-widget-header .ui-state-default {\r\n\t\t\tbackground: #ffffff;\r\n            border: 2px solid #614ac1;\r\n            top: -10px;\r\n            border-radius: 25px;\r\n            outline: none;\r\n            position: absolute;\r\n            font-family: \"Epilogue-Medium\" !important;\r\n    \t}\r\n\t\t.years_experience .ui-slider-horizontal .ui-slider-range {\r\n\t\t\tbackground: #614ac1 !important;\r\n\t\t}\r\n                .years_experience #labelHolder {\r\n                    height: 7px;\r\n                    position: relative;\r\n                    border: none;\r\n                }\r\n                .years_experience span {\r\n                  position: absolute;\r\n                  width: 1.2em;\r\n                  height: 1.2em;\r\n                  margin-left: -.6em;\r\n                  text-align: center;\r\n                }\r\n                .ui-slider .ui-slider-handle {\r\n            position: absolute;\r\n            z-index: 2;\r\n            width: 23px;\r\n            height: 23px;\r\n            cursor: default;\r\n            line-height: 23px;\r\n            text-align: center;\r\n        }\r\n            .years_experience .ui-widget-content {\r\n        \r\n            border-radius: 1.2rem !important;\r\n        }\r\n        /******************************/\r\n        .ui-widget-content {\r\n            padding: 1px;\r\n        }\r\n        .years_experience .ui-state-hover, .years_experience .ui-widget-content .ui-state-hover,\r\n        .years_experience .ui-widget-header .ui-state-hover, .years_experience .ui-state-focus,\r\n        .years_experience .ui-widget-content .ui-state-focus, .years_experience .ui-widget-header .ui-state-focus {\r\n            background: #ffffff !important;\r\n            border: 2px solid #0E6BB2 !important;\r\n             border-radius: 25px !important;\r\n            \r\n        }\r\n            <\/style>\r\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.js\"><\/script>\r\n        \r\n        <label style=\"font-weight:bold\" class=\"w-100\">Size<\/label><br />\r\n        <div class=\"template-color epilogue-semiBold mt-4\">\r\n        <span id=\"id-min-years\"><\/span> - \r\n        <span id=\"id-max-years\"><\/span>\r\n        <\/div>\r\n        <div class=\"years_experience\">\r\n        \r\n        <div id=\"slider_years_experience_years_experience\"><\/div>\r\n        <\/div>\r\n        <br />\r\n        <script>\r\n        \r\n        $(function () {\r\n             var v = [ 0,50];\r\n            $(\"#slider_years_experience_years_experience\").slider({\r\n                range: true,\r\n                min: 0,\r\n                max: 50,\r\n                values: v,\r\n                slide: function(event, ui) {\r\n                //return false;\r\n                  if ((ui.values[1] - ui.values[0]) < 2) {\r\n                      return false;\r\n                  }\r\n              \r\n                       \r\n                 document.getElementById('min_num_of_emp').value=ui.values[0];\r\n                 document.getElementById('max_num_of_emp').value=ui.values[1];\r\n                 document.getElementById('id-min-years').innerHTML=ui.values[0];\r\n                 document.getElementById('id-max-years').innerHTML=ui.values[1];\r\n            \r\n                },\r\n                create: function(event, ui) {\r\n                    $(\"#id-min-years\").html(v[0]);\r\n                    $(\"#id-max-years\").html(v[1]);     \r\n                }\r\n            }).trigger('slide');\r\n        });\r\n        $( document ).ready(function() {\r\n            min=document.getElementById('min_num_of_emp').value;\r\n            max=document.getElementById('max_num_of_emp').value;\r\n            mins=100/50*min;\r\n            maxs=100/50*max;\r\n            console.log(\"mins\",mins);\r\n            console.log(\"maxs\",maxs);\r\n                 \r\n                 document.getElementById('id-min-years').innerHTML=min;\r\n                 document.getElementById('id-max-years').innerHTML=max;\r\n                 \r\n                \r\n            document.getElementsByClassName('ui-slider-range ui-widget-header')[0].setAttribute(\"style\",`left: ${mins}%; width: ${maxs-mins}%;`);\r\n            document.getElementsByClassName('ui-slider-handle ui-state-default ui-corner-all')[0].setAttribute(\"style\",`left: ${mins}%;`);\r\n            document.getElementsByClassName('ui-slider-handle ui-state-default ui-corner-all')[1].setAttribute(\"style\",`left: ${maxs}%;`);\r\n          //  $(\"#slider_years_experience_years_experience *\").parent.parent.parent.attr(\"disabled\", \"disabled\").off('click');\r\n        \r\n        });\r\n        \r\n        \r\n        <\/script>\r\n        "
                        }
                    },
                    {
                        "className": "org.joget.marketplace.AjaxSelectbox",
                        "properties": {
                            "afterTypeDelay": "300",
                            "allowEmpty": "true",
                            "defaultOptions": "",
                            "displayField": "label",
                            "id": "location",
                            "idField": "label",
                            "keepTypingMsg": "Continue typing to search",
                            "label": "Location",
                            "listId": "listlocationdata",
                            "lookingForMsg": "Retrieving results",
                            "minTermLength": "3",
                            "multiple": "true",
                            "placeholder": "Location",
                            "readonly": "",
                            "readonlyLabel": "",
                            "requestParams": [],
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "label",
                            "width": "25%",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "result",
                            "useDefaultWhenEmpty": "true",
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "title",
                            "useDefaultWhenEmpty": "",
                            "value": "New search",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "status",
                            "useDefaultWhenEmpty": "",
                            "value": "active",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "saved",
                            "useDefaultWhenEmpty": "",
                            "value": "false",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "saved_labs",
                            "useDefaultWhenEmpty": "true",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "min_num_of_emp",
                            "useDefaultWhenEmpty": "true",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "0",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "max_num_of_emp",
                            "useDefaultWhenEmpty": "true",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "50",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "tags",
                            "useDefaultWhenEmpty": "",
                            "value": "",
                            "workflowVariable": ""
                        }
                    }
                ],
                "properties": {
                    "customWidth": "",
                    "horizontal": "",
                    "label": "",
                    "width": "100%"
                }
            }],
            "properties": {
                "comment": "",
                "id": "section_filter",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "",
                "permissionReadonly": "",
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field22",
                            "label": "",
                            "value": "<style>\r\n/* The Modal (background) */\r\n#titleSearchError{\r\n    margin-bottom:5px;\r\n}\r\n    .modal {\r\n      display: none; /* Hidden by default */\r\n      position: fixed; /* Stay in place */\r\n      z-index: 999; /* Sit on top */\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%; /* Full width */\r\n      height: 100%; /* Full height */\r\n      overflow: auto; /* Enable scroll if needed */\r\n      background-color: rgb(0,0,0); /* Fallback color */\r\n      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\r\n    }\r\n    \r\n  .modal-content {\r\n    background-color: #ffffff;\r\n    margin: 15% auto;\r\n    padding: 0;\r\n    border: 1px solid #888;\r\n    width: 500px;\r\n    display: block;\r\n}\r\n    \r\n #myModal-advancedSearch .close,\r\n  #myModal-Error .close{\r\n    color: #ffffff !important;\r\n    float: right;\r\n    font-weight: 500;\r\n    opacity: 1;\r\n    position: absolute;\r\n    right: -11px;\r\n    top: -10px;\r\n    width: 25px !important;\r\n    height: 25px !important;\r\n    line-height: 24px !important;\r\n    text-align: center;\r\n    font-size: 19px;\r\n    border-radius: 50%;\r\n    border: 0 !important;\r\n    box-shadow: rgb(100 100 111 / 20%) 0px 7px 29px 0px;\r\n    background: #614ac1 !important;\r\n    text-shadow: none;\r\n}\r\n    .close:hover,\r\n    .close:focus {\r\n      color: #0E6BB2;\r\n      text-decoration: none;\r\n      cursor: pointer;\r\n    }\r\n    .modal-save .btn.waves-input-wrapper {\r\n    color: #ffffff !important;\r\n    background-color: #614ac1 !important;\r\n}\r\n<\/style>\r\n\r\n<div class=\"col bg-white border  p-3 mb-4 d-sm-flex d-md-flex justify-content-between align-items-center rounded-4\">\r\n  <h3 class=\"epilogue-bold template-color  \"  style=\"margin: 0;\">About : <span id=\"total_result\" style=\"size:18px\">0<\/span> results<\/h3>\r\n  <div class=\"d-flex justify-content-end align-items-center\">\r\n    <span class=\"epilogue-regular\">Sort By : <\/span>\r\n    <select class=\"border-none epilogue-medium pe-5\" style=\"width: auto;\" id='sortOption'>\r\n      <option value=\"mostRelevant\">Most relevant<\/option>\r\n      <option value=\"locationAZ\">Location A-Z<\/option>\r\n    <\/select>\r\n    <button class=\" mx-1 px-3 btn-blue float-start rounded-2  fs-6 epilogue-bold btn_export\" disabled>Export<\/button>\r\n    <button type=\"button\" id=\"SaveAdvs\" class=\" mx-1 px-3 btn-blue float-start rounded-2  fs-6 epilogue-bold\" onclick=\"saveSearch()\" disabled>Save<\/button>\r\n  <\/div>\r\n<\/div>\r\n\r\n<div id=\"myModal-advancedSearch\" class=\"modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"modal-content modal-save\">\r\n    <span class=\"close close-modal\">&times;<\/span>\r\n      <h4 class=\"template-color text-center p-3 \" style=\"background-color:#F7F8FA;\">Save a search<\/h4>\r\n    <div id=\"modal-msg text-center  p-3\">\r\n         <div class=\"mx-4\">\r\n            <label class=\"color-blue-1 p-2 text-center w-100 epilogue-semiBold\">Enter search title<\/label>\r\n                   <span class=\"form-error-message\" id=\"titleSearchError\">Field mandatory<\/span>\r\n            <input id=\"save_title_advancedSearch\" class=\"template-color \" placeholder=\"Keyword\" type=\"text\" value=\"\" maxlength=\"40\">\r\n        <\/div>\r\n    <\/div>\r\n    <div class=\" m-3 text-center \">\r\n        <button type=\"button\" class=\"template-color close-modal close-modal-btn text-center ml-2 rounded-8 btn-border   epilogue-semibold\" >Cancel<\/button>\r\n        <input type=\"button\" class=\"bg-template-color rounded-8    epilogue-semiBold\" onClick=\"confirmSaveSearch\" value=\"Save\" id=\"confirmSaveSearch\"/>\r\n    <\/div>\r\n\r\n  <\/div>\r\n<\/div>\r\n\r\n<script>\r\n     // Get the modal\r\n        var modal2 = document.getElementById(\"myModal-advancedSearch\");\r\n        \r\n       \r\n         // Get the <span> element that closes the modal\r\n        var span = document.getElementsByClassName(\"close-modal\")[0];\r\n        \r\n      \r\n        // When the user clicks on <span> (x), close the modal\r\n        span.onclick = function() {\r\n          modal2.style.display = \"none\";\r\n              document.getElementById(\"titleSearchError\").style.display=\"none\";\r\n        }\r\n           // Get the <span> element that closes the modal\r\n        var span1 = document.getElementsByClassName(\"close-modal\")[1];\r\n        \r\n      \r\n        // When the user clicks on <span> (x), close the modal\r\n        span1.onclick = function() {\r\n          modal2.style.display = \"none\";\r\n              document.getElementById(\"titleSearchError\").style.display=\"none\";\r\n        }\r\n        function saveSearch(){\r\n        modal2.style.display = \"block\";\r\n        window.addEventListener(\"click\", function(e){ \r\n                if (e.target == modal2) {\r\n                        modal2.style.display = \"none\";\r\n                            document.getElementById(\"titleSearchError\").style.display=\"none\";\r\n                  }\r\n            });\r\n        }\r\n        \r\n \r\n     \r\n        confirmSaveSearch.onclick = function() {\r\n            var title=document.getElementById(\"save_title_advancedSearch\").value;\r\n            var total_result=document.getElementById(\"saved_labs\").value;\r\n            const queryString = window.location.search;\r\n            const urlParams = new URLSearchParams(queryString);\r\n            const search = urlParams.get('id');\r\n            console.log(\"Title: \",title,\" total: \",total_result);\r\n            if(title!==''){\r\n           \r\n                    parent.window.location.replace('savedLabsSearch?id='+search+'&title='+title+\"&total_result=\"+total_result);\r\n            }else{\r\n         \r\n                document.getElementById(\"titleSearchError\").style.display=\"block\";\r\n                \r\n                   \r\n               \r\n            }\r\n            \r\n        }\r\n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "show_results",
                            "label": "",
                            "value": "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js\"><\/script>\r\n\r\n<script type=\"text/javascript\" src=\"/jw/js/chosen/chosen.jquery.js\"><\/script>\r\n<script type=\"text/javascript\" src=\"/jw/plugin/org.joget.marketplace.AjaxSelectbox/js/jquery.ajaxselect.js\"><\/script>\r\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/jw/js/chosen/chosen.css\">\r\n<style>\r\n    .blockUI,\r\n    .blockOverlay {\r\n        display: none !important;\r\n    }\r\n\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    #bookmark-toggle {\r\n        font-size: 25px;\r\n        user-select: none;\r\n    }\r\n\r\n    .repeater-actions-add {\r\n        float: left;\r\n        z-index: 0;\r\n    }\r\n\r\n    .container {\r\n        border-radius: 5px;\r\n        overflow: hidden;\r\n        /*width: 1100px;*/\r\n    }\r\n\r\n    .header {\r\n        color: black;\r\n        padding: 5px 20px;\r\n        width: 1100px;\r\n    }\r\n\r\n    .title {\r\n        margin: 0;\r\n    }\r\n\r\n    .subtitle {\r\n        display: inline-block;\r\n        margin: 5px 0 20px;\r\n        /*opacity: 0.8;*/\r\n    }\r\n\r\n    .users-list {\r\n\r\n        list-style-type: none;\r\n        margin: 0;\r\n        width: 100%;\r\n        padding: 0px;\r\n        box-sizing: content-box;\r\n    }\r\n\r\n    .users-list li {\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    /*.users-list li:not(:last-of-type) {*/\r\n    /*\tborder-bottom: 1px solid #eee;*/\r\n    /*}*/\r\n\r\n    .users-list li.hide {\r\n        display: none;\r\n    }\r\n\r\n    .users-list li img {\r\n        border-radius: 50%;\r\n        object-fit: cover;\r\n        height: 100px;\r\n        width: 100px;\r\n        margin-bottom: 35px;\r\n    }\r\n\r\n    .user-info {\r\n        margin-left: 10px;\r\n        width: 100%;\r\n        position: relative;\r\n    }\r\n\r\n    .user-info h4 {\r\n        margin: 0 0 10px;\r\n    }\r\n\r\n    .user-info p {\r\n        font-size: 12px;\r\n    }\r\n\r\n    .tags {\r\n        list-style: none;\r\n        margin: 0;\r\n        overflow: hidden;\r\n        padding: 0;\r\n    }\r\n\r\n    .tags li {\r\n        float: left;\r\n    }\r\n\r\n    .tag {\r\n    background: #E871FF;\r\n    border-radius: 25px;\r\n    color: black;\r\n    display: inline-block;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    padding: 0 20px 0 23px;\r\n    position: relative;\r\n    margin: 0 10px 10px 0;\r\n    text-decoration: none;\r\n    overflow:hidden;\r\n    \r\n    }\r\n\r\n    .switch {\r\n        position: relative;\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 34px;\r\n    }\r\n\r\n    .switch input {\r\n        display: none;\r\n    }\r\n\r\n    .slider {\r\n        position: absolute;\r\n        cursor: pointer;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background-color: #ccc;\r\n        -webkit-transition: .4s;\r\n        transition: .4s;\r\n    }\r\n\r\n    .slider:before {\r\n        position: absolute;\r\n        content: \"\";\r\n        height: 26px;\r\n        width: 26px;\r\n        left: 4px;\r\n        bottom: 4px;\r\n        background-color: white;\r\n        -webkit-transition: .4s;\r\n        transition: .4s;\r\n    }\r\n\r\n    input:checked+.slider {\r\n        background-color: #2196F3;\r\n    }\r\n\r\n    input:focus+.slider {\r\n        box-shadow: 0 0 1px #2196F3;\r\n    }\r\n\r\n    input:checked+.slider:before {\r\n        -webkit-transform: translateX(26px);\r\n        -ms-transform: translateX(26px);\r\n        transform: translateX(26px);\r\n    }\r\n\r\n    /* Rounded sliders */\r\n    .slider.round {\r\n        border-radius: 34px;\r\n    }\r\n\r\n    .slider.round:before {\r\n        border-radius: 50%;\r\n    }\r\n\r\n    .pagination li {\r\n        display: inline-block;\r\n        padding: 5px;\r\n    }\r\n\r\n    .pagination li a {\r\n        font-weight: 400;\r\n        padding: 0;\r\n        width: 35px;\r\n        height: 35px;\r\n        line-height: 33px !important;\r\n        text-align: center;\r\n        position: relative;\r\n        cursor: pointer;\r\n        display: inline-block;\r\n        z-index: 3;\r\n        border-radius: 3px !important;\r\n        margin-left: 5px;\r\n    }\r\n\r\n    .nav-pagination {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .nav-pagination [class^=\"btn\"] {\r\n        padding: 8px;\r\n\r\n        color: #337ab7;\r\n        margin: 0 3px;\r\n    }\r\n<\/style>\r\n\r\n<div id=\"myModal-Error\" class=\"modal\">\r\n    <!-- Modal content -->\r\n    <div class=\"modal-content modal-save\">\r\n        <span class=\"close close-modal\">&times;<\/span>\r\n        <h4 class=\"template-color text-center p-3 \" style=\"background-color:#F7F8FA;\"><\/h4>\r\n        <div id=\"modal-msg text-center  p-3\">\r\n            <div class=\"mx-4\">\r\n                <label class=\"color-blue-1 p-2 text-center w-100 epilogue-semiBold\"><\/label>\r\n                <!--<input id=\"filter-error-msg\" class=\"template-color \" placeholder=\"\" type=\"text\" value=\"You must at least fill one filter !\" disabled>-->\r\n            <\/div>\r\n        <\/div>\r\n        <div class=\" m-3 text-center \">\r\n            <button type=\"button\"\r\n                class=\"template-color close-modal close-modal-btn text-center ml-2 rounded-8 btn-border   epilogue-semibold\"\r\n                onclick=\"closeZeroFilterModal();\">Close<\/button>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n<!-- second modal -->\r\n\r\n<!--  -->\r\n<div id=\"result-div\">\r\n    <ul id=\"list-result\" class=\"users-list list\">\r\n         <div class=\"nav-pagination\">\r\n            <ul class=\"pagination\"><\/ul>\r\n        <\/div>\r\n\r\n    <\/ul>\r\n    <div class=\"nav-pagination\">\r\n        <ul class=\"pagination\"><\/ul>\r\n    <\/div>\r\n<\/div>\r\n<!--<div id=\"empty-block\" class=\"bg-white border rounded-4\">-->\r\n<!--    <img src=\"#appResource.hiring.png#\" alt=\"hirevioo search\" />-->\r\n<!--<\/div>-->\r\n\r\n<div id=\"empty-block\" class=\"bg-white border rounded-4\" style=\"padding-top:120px\">\r\n    <img src=\"#appResource.hiring.png#\" alt=\"hirevioo search\" style=\"width: 300px; height: 300px;\">\r\n    <h4 class=\"epilogue-medium\" style=\"margin-top: 25px;color: #614ac1;\">Please enter a search keyword<\/h4>\r\n<\/div>\r\n\r\n<script>\r\n    $(document).keypress(\r\n            function (event) {\r\n                if (event.which == '13') {\r\n                    event.preventDefault();\r\n                    var sc=$(\"save_title_advancedSearch\").val();\r\n                    var keywrodsValue = $(\"#keywords\").val();\r\n                    if(sc!=''){\r\n                         $(\"#confirmSaveSearch\").click();\r\n                    }else if (keywrodsValue != ''){\r\n                         $(\"#submit\").click();\r\n                    }\r\n                       \r\n                }\r\n            });\r\n    // function redirect on submit to saved search form\r\n\r\n\r\n    function popup_show(oid,id_search) {\r\n        var popup = new PopupDialog(\"lab_preview?id=\"+oid+\"&search=\"+id_search+\"&saved=false\"+\"&title=New search&embed=true\", \"\");\r\n        popup.parentWindow = window;\r\n        popup.init();\r\n    }\r\n\r\n\r\n\r\n    const result = document.getElementById('list-result');\r\n\r\n    const total = document.getElementById('total');\r\n    const listItems = [];\r\n    \r\n     function insertSearchResult(id_search, id_profile, score) {\r\n            fetch('#envVariable.backend_hirevioo_url_api#/insertSearchResult?id_search=' + id_search + '&id_profile=' + id_profile + '&score=' + score, { mode: 'no-cors' })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    //console.log(\"data inserted\");\r\n                })\r\n                .catch(error => {\r\n                    //console.log(error)\r\n                });\r\n\r\n        }\r\n\r\n\r\n    function getData(search_result,id_search) {\r\n        document.getElementById('empty-block').style.display=\"none\";\r\n        \r\n        \r\n        const data = search_result;\r\n        const jsonData = JSON.parse(data);\r\n        console.log('===> data',jsonData);\r\n        var totalResult = jsonData.nb_results;\r\n        if (totalResult > 0) {\r\n            document.getElementById('SaveAdvs').disabled = false;\r\n        }\r\n        document.getElementById(\"total_result\").innerHTML = totalResult;\r\n\r\n\r\n        document.getElementById(\"saved_labs\").value = totalResult;\r\n        // clear\r\n        result.innerHTML = '';\r\n\r\n        jsonData.results.forEach(lab => {\r\n            const li = document.createElement('li');\r\n            // store for filter\r\n            listItems.push(li);\r\n            var tags=\"\";\r\n            if(lab.highlight!=\"\" && lab.highlight!=null){\r\n                lab.highlight.forEach(value => {\r\n                        tags += `<p class=\"tag\">${value}<\/p>`\r\n                   \r\n                });\r\n            }\r\n            \r\n\r\n            var oid = lab._source.doc_id;\r\n            insertSearchResult(id_search,oid,0);\r\n            var image=\"data:image/png;base64, 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\";\r\n\r\n            \r\n            li.innerHTML = `\r\n                <a onclick=\"popup_show('`+ oid + `','`+ id_search + `');return false;\" >\r\n                     <div class=\"d-md-flex  flex-grow-1 align-items-center justify-content-between p-3 mb-2 bg-white border  position-relative talent-advenced-search rounded-8\">\r\n  <div class=\"d-sm-flex w-100\">\r\n  <img class=\"me-4\" src=\"${image}\" alt=\"${lab._source.name}\">\r\n    <div class=\"talent-body d-flex flex-column justify-content-start align-items-center align-items-sm-start\">\r\n      <div class=\"talent-name epilogue-semiBold\">\r\n        <h4 class=\"color-black my-3 epilogue-semiBold\" id=\"labname_result\">${lab._source.name}<\/h4>\r\n      <\/div>\r\n      <div class=\"talent-job \">\r\n        <h5>\r\n          <span class=\"epilogue-semiBold\">${lab._source.institution}\r\n        <\/h5>\r\n        <\/div>\r\n      <div class=\"skills mt-2\" style=\" min-height: 34px;\">\r\n      <div  class=\" mx-1 px-3 py-1 float-start rounded-2  fs-6 epilogue-bold mb-1\">${tags}<\/div>\r\n      <\/div>\r\n    <\/div>\r\n  <\/div>\r\n    <i class=\"fa fa-heart-o template-color  fs-2 float-end position-absolute\" style=\"right: 15px;top: 15px;\"><\/i>\r\n <\/div>\r\n<\/a>\r\n            \r\n            \t\t\t\t\t`;\r\n\r\n            result.appendChild(li);\r\n\r\n        });\r\n\r\n\r\n    }\r\nfunction LastFirstButtons(list){\r\n            $('.nav-pagination').append('<div class=\"btn-next\"> <i class=\"fa fa-angle-right\" style=\"font-size:14px\"><\/i> <\/div><div class=\"btn-last\"> <i class=\"fa fa-angle-double-right\" style=\"font-size:14px;\"><\/i> <\/div>');\r\n            $('.nav-pagination').prepend('<div class=\"btn-first\"> <i class=\"fa fa-angle-double-left\" style=\"font-size:14px;\"><\/i> <\/div><div class=\"btn-prev\"> <i class=\"fa fa-angle-left\" style=\"font-size:14px;\"><\/i> <\/div>');\r\n\r\n            $('.btn-next').on('click', function(){\r\n                $('.pagination .active').next().trigger('click');\r\n            })\r\n            $('.btn-prev').on('click', function(){\r\n                $('.pagination .active').prev().trigger('click');\r\n            })\r\n            $('.btn-first').on('click', function(){\r\n                list.show(1,6)\r\n            })\r\n            $('.btn-last').on('click', function(){\r\n                list.show(list.size()-5,6)\r\n            })\r\n        }\r\n        \r\n        function sort_by_key(array, key) {\r\n            return array.sort(function (a, b) {\r\n                var x = a[key]; var y = b[key];\r\n                return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n            });\r\n        }\r\n        \r\n         function closeZeroFilterModal() {\r\n            var spanFilter = document.getElementsByClassName(\"close-modal\")[2];\r\n            spanFilter.click();\r\n            window.location.href = 'labs';\r\n        }\r\n        \r\n        function ModalCallOut(x){\r\n                             \r\n                    // Get the modal\r\n                    var modalFilters = document.getElementById(\"myModal-Error\");\r\n                    var modalmessage=modalFilters.getElementsByClassName('color-blue-1 p-2 text-center w-100 epilogue-semiBold')[0].innerHTML=x;\r\n                    \r\n                    // Get the <span> element that closes the modal\r\n                    var spanFilter = document.getElementsByClassName(\"close-modal\")[2];\r\n\r\n\r\n                    // When the user clicks on <span> (x), close the modal\r\n                    spanFilter.onclick = function () {\r\n                        modalFilters.style.display = \"none\";\r\n                    }\r\n\r\n\r\n                    modalFilters.style.display = \"block\";\r\n                    apiResult.value = '';\r\n                    window.addEventListener(\"click\", function (e) {\r\n                        if (e.target == modalFilters) {\r\n                            modalFilters.style.display = \"none\";\r\n                        }\r\n                    });\r\n        }\r\n\r\n$(document).ready(function(){\r\n    sessionStorage.setItem(\"pageNav\",\"labs_search_nav\");\r\n    apiResult=document.getElementById('result').value;\r\n    const queryString = window.location.search;\r\n    const urlParams = new URLSearchParams(queryString);\r\n    const id_search = urlParams.get('id');\r\n    if(apiResult!=\"\"){\r\n                if (apiResult.includes('filtersMandatory')) {\r\n                    var x='#envVariable.AdvancedSearch400Status#';\r\n                    ModalCallOut(x);\r\n\r\n               } else if(apiResult.includes('serverError')) {\r\n                  // #envVariable.AdvancedSearch400Status#\r\n                    var x='#envVariable.AdvancedSearch500Status#';\r\n                    ModalCallOut(x);\r\n                }else if(apiResult.includes('\"nb_results\":0')){\r\n                    var x='#envVariable.AdvancedSearch0Result#';\r\n                    ModalCallOut(x);\r\n                }else{\r\n                    document.getElementById(\"empty-block\").style.display = \"none\";\r\n                    const queryString = window.location.search;\r\n                    const urlParams = new URLSearchParams(queryString);\r\n                    const id_search = urlParams.get('id');\r\n                    getData(apiResult,id_search);\r\n                      var paginationList = new List('result-div', {\r\n                                page: 6,\r\n                                pagination: true\r\n                            });\r\n                            LastFirstButtons(paginationList)\r\n                }\r\n            \r\n            document.getElementById('sortOption').addEventListener(\"change\", function () {\r\n            var apiResult = document.getElementById('result').value;\r\n            var option = document.getElementById('sortOption').value;\r\n            const jsonSearchResultData = JSON.parse(apiResult);\r\n            console.log(jsonSearchResultData);\r\n            if (option == 'locationAZ') {\r\n                var sortedArray = sort_by_key(jsonSearchResultData.results, 'location');\r\n               // console.log(sortedArray);\r\n             var sortedRes = '{\"results\":' + JSON.stringify(sortedArray) + ',\"nb_results\":'+jsonSearchResultData.nb_results +\"}\";\r\n                getData(sortedRes, id_search);\r\n    \r\n            } else {\r\n                getData(apiResult, id_search);\r\n \r\n            }\r\n        });\r\n    }\r\n})\r\n\r\n <\/script>"
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "section2",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionReadonly": "",
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        }
    ],
    "properties": {
        "description": "",
        "id": "advnaced_search_labs",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Advanced Labs search",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "postProcessor": {
            "className": "org.joget.apps.app.lib.BeanShellTool",
            "properties": {"script": "import org.joget.apps.form.model.*;\r\nimport org.joget.apps.form.service.*;\r\nimport org.joget.apps.app.service.*;\r\nimport java.sql.*;\r\nimport java.util.*;\r\nimport java.text.*;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport javax.sql.DataSource;\r\nimport java.sql.Date;\r\n\r\n    String recordId = \"#form.app_fd_adv_search_labs.id#\";\r\n     System.out.println(\"==============================>\"+recordId);\r\n    DateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n    java.util.Date date = new java.util.Date();\r\n    String dateSave=dateFormat.format(date);\r\n    System.out.println(\"==============================>\"+dateSave);\r\n    //Get Joget's current datasource configs\r\n    DataSource ds = (DataSource) AppUtil.getApplicationContext().getBean(\"setupDataSource\");\r\n    con = ds.getConnection();\r\n    if (!con.isClosed()) {\r\n\r\n            //Here you can query from one or multiple tables using JOIN etc\r\n           String sql = \"UPDATE app_fd_adv_search_labs SET c_date=? WHERE id=?;\";\r\n    \r\n            PreparedStatement stmt = con.prepareStatement(sql);\r\n            \r\n            stmt.setString(1, dateSave);\r\n            stmt.setString(2, recordId);\r\n            //Execute the SELECT SQL statement\r\n            ////Execute SQL statement\r\n            stmt.executeUpdate();\r\n     \r\n    }\r\n    con.close();\r\n"}
        },
        "postProcessorRunOn": "both",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.BeanShellFormBinder",
            "properties": {
                "autoHandleFiles": "",
                "autoHandleWorkflowVariable": "",
                "cacheInterval": "",
                "script": "import org.joget.apps.form.model.FormRowSet;\nimport org.joget.apps.form.model.FormRow;\nimport org.bson.Document;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport javax.sql.DataSource;\nimport org.joget.commons.util.LogUtil;\nimport org.joget.apps.app.service.AppUtil;\nimport org.joget.commons.util.UuidGenerator;\nimport org.joget.apps.form.model.FormStoreBinder;\nimport org.joget.plugin.base.PluginManager;\nimport org.joget.apps.form.model.Element;\nimport org.joget.apps.form.model.FormData;\nimport org.joget.commons.util.LogUtil;\nimport org.bson.Document;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpRequestBase;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.util.EntityUtils;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.net.URLEncoder;\n\n\npublic String setTags(){\n    String tags=\"\";\n    String keywords=\"\";\n    String location=\"\";\n    String speciality=\"\";\n    String institution=\"\";\n    String topics=\"\";\n\n    if(!rows.get(0).getProperty(\"keywords\").equals(\"\"))\n    {\n        keywords=rows.get(0).getProperty(\"keywords\");\n        \n        if(tags.equals(\"\"))\n            tags=\"keywords: \"+keywords;\n        else\n            tags+=\", keywords: \"+keywords;\n      \n    }\n    \n    if(!rows.get(0).getProperty(\"location\").equals(\"\"))\n    {\n        if(rows.get(0).getProperty(\"location\").contains(\";\")){\n            location=rows.get(0).getProperty(\"location\").replaceAll(\";\",\" \");\n        }\n        else{\n            location=rows.get(0).getProperty(\"location\");\n        }\n        location=location.toLowerCase();\n        if(tags.equals(\"\"))\n            tags=\"location: \"+location;\n        else\n            tags+=\", location: \"+location;\n    }\n    if(!rows.get(0).getProperty(\"speciality\").equals(\"\"))\n    {\n        if(rows.get(0).getProperty(\"speciality\").contains(\";\")){\n            speciality=rows.get(0).getProperty(\"speciality\").replaceAll(\";\",\" \");\n        }\n        else{\n            speciality=rows.get(0).getProperty(\"speciality\");\n        }\n            \n        speciality=speciality.toLowerCase();\n        if(tags.equals(\"\"))\n            tags=\"speciality: \"+speciality;\n        else\n            tags+=\", speciality: \"+speciality;\n    }\n    if(!rows.get(0).getProperty(\"institution\").equals(\"\"))\n    {\n        institution=rows.get(0).getProperty(\"institution\");\n        \n        if(tags.equals(\"\"))\n            tags=\"institution: \"+institution;\n        else\n            tags+=\", institution: \"+institution;\n      \n    }\n    if(!rows.get(0).getProperty(\"research_topics\").equals(\"\"))\n    {\n        if(rows.get(0).getProperty(\"research_topics\").contains(\";\")){\n            topics=rows.get(0).getProperty(\"research_topics\").replaceAll(\";\",\" \");\n        }\n        else{\n            topics=rows.get(0).getProperty(\"research_topics\");\n        }\n            \n        topics=topics.toLowerCase();\n        if(tags.equals(\"\"))\n            tags=\"topics: \"+topics;\n        else\n            tags+=\", topics: \"+topics;\n    }\n    \n\n    return tags;\n}\n\n// consume API\npublic String searchAPI(){\n    \n    String keywords=\"\";\n    String location=\"\";\n    String speciality=\"\";\n    String institution=\"\";\n    String topics=\"\";\n\n    if(!rows.get(0).getProperty(\"keywords\").equals(\"\"))\n    {\n        keywords=rows.get(0).getProperty(\"keywords\");\n      \n    }\n    \n    if(!rows.get(0).getProperty(\"location\").equals(\"\"))\n    {\n        String locationTags=\"\";\n        if(rows.get(0).getProperty(\"location\").contains(\";\")){\n            location=rows.get(0).getProperty(\"location\").replaceAll(\";\",\" \");\n            locationTags=rows.get(0).getProperty(\"location\").replaceAll(\";\",\",\");\n        }\n        else{\n            location=rows.get(0).getProperty(\"location\");\n            locationTags=rows.get(0).getProperty(\"location\");\n        }\n\n        location=location.toLowerCase();\n    }\n    if(!rows.get(0).getProperty(\"speciality\").equals(\"\"))\n    {\n        String specialityTags=\"\";\n        if(rows.get(0).getProperty(\"speciality\").contains(\";\")){\n            speciality=rows.get(0).getProperty(\"speciality\").replaceAll(\";\",\" \");\n            specialityTags=rows.get(0).getProperty(\"speciality\").replaceAll(\";\",\",\");\n        }\n        else{\n            speciality=rows.get(0).getProperty(\"speciality\");\n            specialityTags=rows.get(0).getProperty(\"speciality\");\n        }\n            \n        speciality=speciality.toLowerCase();\n    }\n    \n    if(!rows.get(0).getProperty(\"institution\").equals(\"\"))\n    {\n        institution=rows.get(0).getProperty(\"institution\");\n        institution=institution.toLowerCase();\n    }\n    \n    if(!rows.get(0).getProperty(\"research_topics\").equals(\"\"))\n    {\n        \n        if(rows.get(0).getProperty(\"research_topics\").contains(\";\")){\n            topics=rows.get(0).getProperty(\"research_topics\").replaceAll(\";\",\" \");\n        }\n        else{\n            topics=rows.get(0).getProperty(\"research_topics\");\n        }\n            \n        topics=topics.toLowerCase();\n    }\n    \n    \n    try{\n       String jsonUrl = \"#envVariable.elasticsearch_hirevioo_url_api#/search/labs/labs?keywords=\"+URLEncoder.encode(keywords, StandardCharsets.UTF_8)\n        +\"&university=\"\n        +\"&institution=\"+URLEncoder.encode(institution, StandardCharsets.UTF_8)\n        +\"&research_structure=\"\n        +\"&research_topics=\"+URLEncoder.encode(topics, StandardCharsets.UTF_8)\n        +\"&size_min=0\"\n        +\"&size_max=0\"\n        +\"&location=\"+URLEncoder.encode(location, StandardCharsets.UTF_8)\n        +\"&specialties=\"+URLEncoder.encode(speciality, StandardCharsets.UTF_8);     \n\n        LogUtil.info(jsonUrl,\"\");\n        \n        CloseableHttpClient client = null;\n        CloseableHttpClient client = HttpClients.createDefault();\n     \n        HttpRequestBase request = null;\n        request = new HttpGet(jsonUrl);\n    \n        HttpResponse response = client.execute(request);\n        int statusCode = response.getStatusLine().getStatusCode();\n        if(statusCode==200){\n        HttpEntity entity = response.getEntity();\n        // Read the contents of an entity and return it as a String.\n        String res = EntityUtils.toString(entity,StandardCharsets.UTF_8);\n        request.releaseConnection();\n        client.close();\n        return res;\n        }\n        else if(statusCode==400){\n            return \"filtersMandatory\";\n        }else{\n            return \"serverError\";\n      \n        }\n     \n    } catch (Exception ex) {\n            System.out.println(ex);\n    }\n}\n\n\n\npublic FormRowSet store(Element element, FormRowSet rows, FormData formData) {\n     String tags=\"\";\n    //check the rows is not empty before store it\n    if (rows != null && !rows.isEmpty()) {\n        //Get the submitted data\n        FormRow row = rows.get(0);\n        String searchResult=searchAPI();\n        row.setProperty(\"result\", searchResult);\n        if(searchResult.contains(\"nb_results\")){\n            Document doc= Document.parse(searchResult);\n            row.setProperty(\"saved_labs\", Integer.toString(doc.getInteger(\"nb_results\")));\n        }\n        tags=setTags();\n        row.setProperty(\"tags\", tags);\n        LogUtil.info(\"-------------------------------------------------------->Tags: \"+searchResult,\"\");\n        //Reuse Workflow Form Binder to store data\n        PluginManager pluginManager = (PluginManager) AppUtil.getApplicationContext().getBean(\"pluginManager\");\n        FormStoreBinder binder = (FormStoreBinder) pluginManager.getPlugin(\"org.joget.apps.form.lib.WorkflowFormBinder\");\n        binder.store(element, rows, formData);\n    }\n     \n    return rows;\n}\n \n//call store method with injected variable\nreturn store(element, rows, formData);\n"
            }
        },
        "tableName": "adv_search_labs"
    }
}